{"version":3,"sources":["src/support/check.js","node_modules/core-js/modules/_new-promise-capability.js","node_modules/core-js/modules/_global.js","node_modules/core-js/modules/_core.js","node_modules/core-js/modules/_is-object.js","node_modules/core-js/modules/_an-object.js","node_modules/core-js/modules/_fails.js","node_modules/core-js/modules/_descriptors.js","node_modules/core-js/modules/_dom-create.js","node_modules/core-js/modules/_ie8-dom-define.js","node_modules/core-js/modules/_to-primitive.js","node_modules/core-js/modules/_object-dp.js","node_modules/core-js/modules/_property-desc.js","node_modules/core-js/modules/_hide.js","node_modules/core-js/modules/_has.js","node_modules/core-js/modules/_uid.js","node_modules/core-js/modules/_redefine.js","node_modules/core-js/modules/_a-function.js","node_modules/core-js/modules/_ctx.js","node_modules/core-js/modules/_export.js","node_modules/core-js/modules/_to-integer.js","node_modules/core-js/modules/_to-length.js","node_modules/core-js/modules/_cof.js","node_modules/core-js/modules/_shared.js","node_modules/core-js/modules/_wks.js","node_modules/core-js/modules/_is-regexp.js","node_modules/core-js/modules/_defined.js","node_modules/core-js/modules/_string-context.js","node_modules/core-js/modules/_fails-is-regexp.js","node_modules/core-js/modules/es6.string.starts-with.js","node_modules/core-js/modules/_to-absolute-index.js","node_modules/core-js/modules/es6.string.from-code-point.js","node_modules/core-js/modules/_to-object.js","node_modules/core-js/modules/_iter-call.js","node_modules/core-js/modules/_is-array-iter.js","node_modules/core-js/modules/_create-property.js","node_modules/core-js/modules/_classof.js","node_modules/core-js/modules/core.get-iterator-method.js","node_modules/core-js/modules/_iter-detect.js","node_modules/core-js/modules/es6.array.from.js","node_modules/core-js/modules/_an-instance.js","node_modules/core-js/modules/_task.js","node_modules/core-js/modules/_for-of.js","node_modules/core-js/modules/_species-constructor.js","node_modules/core-js/modules/_invoke.js","node_modules/core-js/modules/_html.js","node_modules/core-js/modules/es6.promise.js","node_modules/core-js/modules/_microtask.js","node_modules/core-js/modules/_perform.js","node_modules/core-js/modules/_user-agent.js","node_modules/core-js/modules/_promise-resolve.js","node_modules/core-js/modules/_set-to-string-tag.js","node_modules/core-js/modules/_set-species.js","node_modules/core-js/modules/_redefine-all.js","node_modules/core-js/modules/_meta.js","node_modules/core-js/modules/_wks-ext.js","node_modules/core-js/modules/_wks-define.js","node_modules/core-js/modules/_iobject.js","node_modules/core-js/modules/_to-iobject.js","node_modules/core-js/modules/_shared-key.js","node_modules/core-js/modules/_object-keys-internal.js","node_modules/core-js/modules/_array-includes.js","node_modules/core-js/modules/_enum-bug-keys.js","node_modules/core-js/modules/_object-keys.js","node_modules/core-js/modules/_object-gops.js","node_modules/core-js/modules/_object-pie.js","node_modules/core-js/modules/_enum-keys.js","node_modules/core-js/modules/_is-array.js","node_modules/core-js/modules/_object-dps.js","node_modules/core-js/modules/_object-create.js","node_modules/core-js/modules/_object-gopn.js","node_modules/core-js/modules/_object-gopn-ext.js","node_modules/core-js/modules/_object-gopd.js","node_modules/core-js/modules/es6.symbol.js","node_modules/regenerator-runtime/runtime.js","src/support/polyfill.js","src/lib/event.js","src/lib/copier.js","src/lib/modifier.js","src/lib/word.js","src/input.js","src/lib/prefixgen.js","src/lib/promises.js","src/lib/results.js","src/lib/provider.js","src/lib/valid.js","src/options.js","src/page.js","src/adverts.js","src/offline.js","src/polyfill.js","src/buttons.js","src/lib/worker.js","src/selection.js","src/sw.js"],"names":["window","location","search","indexOf","Map","WeakMap","PromiseCapability","C","resolve","reject","promise","$$resolve","$$reject","undefined","TypeError","aFunction","global","module","Math","self","Function","__g","core","version","__e","it","isObject","exec","e","require$$0","Object","defineProperty","get","a","document","is","createElement","require$$1","require$$2","S","fn","val","toString","call","valueOf","dP","O","P","Attributes","toPrimitive","IE8_DOM_DEFINE","value","bitmap","object","key","f","createDesc","hasOwnProperty","id","px","random","concat","SRC","$toString","TPL","split","inspectSource","safe","isFunction","has","hide","join","String","prototype","this","that","length","b","c","apply","arguments","$export","type","name","source","own","out","exp","IS_FORCED","F","IS_GLOBAL","G","IS_STATIC","IS_PROTO","IS_BIND","B","target","exports","expProto","ctx","redefine","U","W","R","ceil","floor","isNaN","min","toInteger","slice","store","push","Symbol","USE_SYMBOL","uid","MATCH","isRegExp","cof","searchString","NAME","defined","$startsWith","KEY","re","context","index","toLength","max","fromCharCode","$fromCodePoint","fromCodePoint","x","code","res","aLen","i","toAbsoluteIndex","RangeError","iterator","entries","anObject","ret","ITERATOR","ArrayProto","Array","Iterators","$defineProperty","TAG","ARG","tryGet","T","callee","getIteratorMethod","classof","SAFE_CLOSING","riter","from","skipClosing","arr","iter","next","done","arrayLike","result","step","toObject","mapfn","mapping","iterFn","getIterFn","isArrayIter","defer","channel","port","Constructor","forbiddenField","BREAK","RETURN","iterable","SPECIES","D","constructor","args","un","documentElement","process","setTask","setImmediate","clearTask","clearImmediate","MessageChannel","Dispatch","counter","queue","run","listener","event","data","nextTick","now","port2","port1","onmessage","postMessage","addEventListener","importScripts","cel","appendChild","removeChild","Internal","newGenericPromiseCapability","OwnPromiseCapability","Wrapper","macrotask","set","Observer","MutationObserver","WebKitMutationObserver","Promise","isNode","v","navigator","userAgent","promiseCapability","newPromiseCapability","def","tag","stat","configurable","task","microtask","head","last","notify","flush","parent","domain","exit","enter","standalone","then","toggle","node","createTextNode","observe","characterData","versions","v8","$Promise","empty","newPromiseCapabilityModule","USE_NATIVE","FakePromise","PromiseRejectionEvent","isThenable","isReject","_n","chain","_c","_v","ok","_s","reaction","exited","handler","fail","_h","onHandleUnhandled","onUnhandled","console","unhandled","isUnhandled","perform","emit","onunhandledrejection","reason","error","_a","onrejectionhandled","$reject","_d","_w","$resolve","wrapper","executor","err","src","onFulfilled","onRejected","speciesConstructor","require$$4","DESCRIPTORS","require$$6","r","capability","promiseResolve","require$$7","all","values","remaining","$index","alreadyCalled","META","setDesc","isExtensible","FREEZE","preventExtensions","setMeta","meta","create","w","NEED","propertyIsEnumerable","IObject","shared","arrayIndexOf","IS_INCLUDES","$this","el","fromIndex","toIObject","IE_PROTO","names","keys","$keys","enumBugKeys","getOwnPropertySymbols","getKeys","getSymbols","gOPS","symbols","isEnum","pIE","isArray","arg","defineProperties","Properties","Empty","createDict","iframeDocument","iframe","style","display","contentWindow","open","write","lt","close","dPs","hiddenKeys","getOwnPropertyNames","gOPN","windowNames","getWindowNames","gOPD","getOwnPropertyDescriptor","$GOPD","$DP","gOPNExt","$Symbol","$JSON","JSON","_stringify","stringify","HIDDEN","wks","TO_PRIMITIVE","SymbolRegistry","AllSymbols","OPSymbols","ObjectProto","QObject","setter","findChild","setSymbolDesc","$fails","_create","protoDesc","wrap","sym","_k","isSymbol","babelHelpers.typeof","enumerable","$defineProperties","enumKeys","l","$propertyIsEnumerable","E","$getOwnPropertyDescriptor","$getOwnPropertyNames","$getOwnPropertySymbols","IS_OP","$set","es6Symbols","j","wellKnownSymbols","k","charAt","wksExt","replacer","$replacer","require$$5","setToStringTag","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","Context","_invoke","makeInvokeMethod","tryCatch","obj","GeneratorFunction","GeneratorFunctionPrototype","defineIteratorMethods","forEach","method","AsyncIterator","invoke","record","hasOwn","__await","unwrapped","bind","previousPromise","callInvokeWithMethodAndArg","state","GenStateSuspendedStart","GenStateExecuting","Error","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","GenStateSuspendedYield","return","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iteratorMethod","iteratorSymbol","Op","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","runtime","regeneratorRuntime","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","Gp","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","async","reverse","pop","skipTempReset","prev","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","thrown","CustomEvent","params","bubbles","cancelable","detail","createEvent","initCustomEvent","Event","Element","parentNode","testEl","classList","contains","original","DOMTokenList","force","add","remove","fetch","arrowFromEvent","ev","startsWith","arrowKeys","isKeyboardClick","MouseEvent","screenX","webkitForce","copyText","text","dummy","position","opacity","body","hidden","focus","selectionStart","selectionEnd","execCommand","isPointGender","p","isPersonGender","isFamilyMember","isVariationSelector","isDiversitySelector","isFlagPoint","unlikelyModifierBase","jsdecode","s","len","points","raw","charCodeAt","extra","splitEmoji","curr","point","suffix","check","modify","opt_op","stats","tone","gender","single","double","neutral","chars","some","char","first","genderable","family","ch","flip","genderFlip","isSinglePerson","basicDiversity","candidate","isSingle","nextGenderPoint","g","previousMaster","master","opt_point","opt_allowOtherFlip","n","m","map","allowOtherFlip","genderPoint","reduce","letterAt","pos","match","at","to","substr","trim","datasetSafeDelete","d","dataset","cursorPosition","upgraded","build","prefixLength","maxSuggestions","prefixSuggest","prefix","part","opts","typed","rest","toLowerCase","filter","word","idle","requestIdleCallback","rAF","delay","setTimeout","requestAnimationFrame","ms","debounce","callable","debouceMap","delete","clearTimeout","t","removeDuplicates","row","found","Set","item","merge","existing","update","lookup","existingRow","updatedData","loaderFor","expiry","callback","promiseResults","localStorage","parse","debug","Date","xhr","XMLHttpRequest","api","onerror","responseType","onload","response","send","request","more","recent","unshift","getTrendingEmoji","localPromise","getPrefixGen","suggest","url","encodeURIComponent","morePromise","json","both","local","submit","emoji","FormData","append","mode","valid","known","immediate","worker","navigateChooserButtonVertical","cands","best","dist","Infinity","button","previousRect","activeElement","getBoundingClientRect","left","previousChooserLeft","targetTop","candidateRect","top","abs","isExtentNode","cleanupPrompt","refresh","active","adverts","querySelector","nextElementSibling","firstElementChild","warn","enqueue","timeout","notifyStatus","prevOnLine","onLine","start","performance","cancelIdleCallback","sendBeacon","buttons","querySelectorAll","hasValue","Boolean","disabled","typer","input","maybeReleaseInputEnter","wasInputEnter","defaultText","textContent","copy","replace","copier","repeat","click","preventDefault","eventlib","getContext","font","measureText","cache","count","width","fixedWidthEmoji","platform","debugMode","emojiWidth","invalidWidth","characterWidth","isExpectedLength","flags","total","expectedLength","clen","list","maybeReplace","expectSpace","sel","mustBeSpace","dispatchEvent","helper","className","insertBefore","underline","autocomplete","sizer","nonce","offsetLeft","mid","scrollLeft","readyState","renderLine","getElementById","transform","setRange","renderAutocomplete","initialLength","end","changeHandler","permitNextChange","previousDetail","mergedEventHandler","events","setSelectionRange","alreadyAtState","selection","hasPendingSpace","frame","dedup","clear","which","success","shiftKey","keyCode","dedupRenderLine","passive","replaceFocus","previousScrollLeft","dir","selectionDirection","expected","drift","where","modifier","choice","loader","working","results","select","pending","runner","splice","promises","Worker","fn_","queue_","waiting_","runner_","catch","_this","chunk_","shift","_this2","ls","ButtonManager","holder","holder_","options_","buttons_","buttonTarget_","buttonPool_","modifierHolder","setModifier","genderOption","optionType_","toneOption","createModifierButton","genders","tones","updateStatus","yes","owner","nextSibling","setAttribute","option","isValid","replaceChild","options","previousActiveElement","_this3","optionForName_","children","addEmojiTo_","spaceFrame","chooser","localName","duringNavigate","isKeyboard","label","scrollTop","scrollingElement","metaKey","ctrlKey","typerRect","arrow","buttonArray","delta","focusRect","height","innerHeight","findSuggest","q","previousResults","manager","previous","previousQueryAt","query","initialMore","provider","pow","advanced","form","namer","status","getSelection","anchorNode","focusNode","removeAllRanges","resize","minHeight","deferredPrompt","prompt","userChoice","serviceWorker","register","hadInitialController","controller","reload"],"mappings":"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","file":"support-084391b03f.js","sourcesContent":["\nif (!window.location.search || window.location.search.indexOf('ignore_check') === -1) {\n  const support = true && window.Map && window.WeakMap;\n  if (!support) {\n    window.location = 'error.html';\n  }\n}\n","'use strict';\n// 25.4.1.5 NewPromiseCapability(C)\nvar aFunction = require('./_a-function');\n\nfunction PromiseCapability(C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n}\n\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n","var core = module.exports = { version: '2.5.6' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n","var global = require('./_global');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar SRC = require('./_uid')('src');\nvar TO_STRING = 'toString';\nvar $toString = Function[TO_STRING];\nvar TPL = ('' + $toString).split(TO_STRING);\n\nrequire('./_core').inspectSource = function (it) {\n  return $toString.call(it);\n};\n\n(module.exports = function (O, key, val, safe) {\n  var isFunction = typeof val == 'function';\n  if (isFunction) has(val, 'name') || hide(val, 'name', key);\n  if (O[key] === val) return;\n  if (isFunction) has(val, SRC) || hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));\n  if (O === global) {\n    O[key] = val;\n  } else if (!safe) {\n    delete O[key];\n    hide(O, key, val);\n  } else if (O[key]) {\n    O[key] = val;\n  } else {\n    hide(O, key, val);\n  }\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, TO_STRING, function toString() {\n  return typeof this == 'function' && this[SRC] || $toString.call(this);\n});\n","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var global = require('./_global');\nvar core = require('./_core');\nvar hide = require('./_hide');\nvar redefine = require('./_redefine');\nvar ctx = require('./_ctx');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] || (global[name] = {}) : (global[name] || {})[PROTOTYPE];\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE] || (exports[PROTOTYPE] = {});\n  var key, own, out, exp;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    // export native or passed\n    out = (own ? target : source)[key];\n    // bind timers to global for call from export context\n    exp = IS_BIND && own ? ctx(out, global) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // extend global\n    if (target) redefine(target, key, out, type & $export.U);\n    // export\n    if (exports[key] != out) hide(exports, key, exp);\n    if (IS_PROTO && expProto[key] != out) expProto[key] = out;\n  }\n};\nglobal.core = core;\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","var core = require('./_core');\nvar global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: require('./_library') ? 'pure' : 'global',\n  copyright: ' 2018 Denis Pushkarev (zloirock.ru)'\n});\n","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n","// 7.2.8 IsRegExp(argument)\nvar isObject = require('./_is-object');\nvar cof = require('./_cof');\nvar MATCH = require('./_wks')('match');\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : cof(it) == 'RegExp');\n};\n","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n","// helper for String#{startsWith, endsWith, includes}\nvar isRegExp = require('./_is-regexp');\nvar defined = require('./_defined');\n\nmodule.exports = function (that, searchString, NAME) {\n  if (isRegExp(searchString)) throw TypeError('String#' + NAME + \" doesn't accept regex!\");\n  return String(defined(that));\n};\n","var MATCH = require('./_wks')('match');\nmodule.exports = function (KEY) {\n  var re = /./;\n  try {\n    '/./'[KEY](re);\n  } catch (e) {\n    try {\n      re[MATCH] = false;\n      return !'/./'[KEY](re);\n    } catch (f) { /* empty */ }\n  } return true;\n};\n","// 21.1.3.18 String.prototype.startsWith(searchString [, position ])\n'use strict';\nvar $export = require('./_export');\nvar toLength = require('./_to-length');\nvar context = require('./_string-context');\nvar STARTS_WITH = 'startsWith';\nvar $startsWith = ''[STARTS_WITH];\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(STARTS_WITH), 'String', {\n  startsWith: function startsWith(searchString /* , position = 0 */) {\n    var that = context(this, searchString, STARTS_WITH);\n    var index = toLength(Math.min(arguments.length > 1 ? arguments[1] : undefined, that.length));\n    var search = String(searchString);\n    return $startsWith\n      ? $startsWith.call(that, search, index)\n      : that.slice(index, index + search.length) === search;\n  }\n});\n","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n","var $export = require('./_export');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nvar fromCharCode = String.fromCharCode;\nvar $fromCodePoint = String.fromCodePoint;\n\n// length should be 1, old FF problem\n$export($export.S + $export.F * (!!$fromCodePoint && $fromCodePoint.length != 1), 'String', {\n  // 21.1.2.2 String.fromCodePoint(...codePoints)\n  fromCodePoint: function fromCodePoint(x) { // eslint-disable-line no-unused-vars\n    var res = [];\n    var aLen = arguments.length;\n    var i = 0;\n    var code;\n    while (aLen > i) {\n      code = +arguments[i++];\n      if (toAbsoluteIndex(code, 0x10ffff) !== code) throw RangeError(code + ' is not a valid code point');\n      res.push(code < 0x10000\n        ? fromCharCode(code)\n        : fromCharCode(((code -= 0x10000) >> 10) + 0xd800, code % 0x400 + 0xdc00)\n      );\n    } return res.join('');\n  }\n});\n","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) anObject(ret.call(iterator));\n    throw e;\n  }\n};\n","// check on default Array iterator\nvar Iterators = require('./_iterators');\nvar ITERATOR = require('./_wks')('iterator');\nvar ArrayProto = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n","'use strict';\nvar $defineProperty = require('./_object-dp');\nvar createDesc = require('./_property-desc');\n\nmodule.exports = function (object, index, value) {\n  if (index in object) $defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof');\nvar TAG = require('./_wks')('toStringTag');\n// ES3 wrong here\nvar ARG = cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n","var ITERATOR = require('./_wks')('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function () { SAFE_CLOSING = true; };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(riter, function () { throw 2; });\n} catch (e) { /* empty */ }\n\nmodule.exports = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n  try {\n    var arr = [7];\n    var iter = arr[ITERATOR]();\n    iter.next = function () { return { done: safe = true }; };\n    arr[ITERATOR] = function () { return iter; };\n    exec(arr);\n  } catch (e) { /* empty */ }\n  return safe;\n};\n","'use strict';\nvar ctx = require('./_ctx');\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar toLength = require('./_to-length');\nvar createProperty = require('./_create-property');\nvar getIterFn = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function (iter) { Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n    var O = toObject(arrayLike);\n    var C = typeof this == 'function' ? this : Array;\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var index = 0;\n    var iterFn = getIterFn(O);\n    var length, result, step, iterator;\n    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {\n      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for (result = new C(length); length > index; index++) {\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n","module.exports = function (it, Constructor, name, forbiddenField) {\n  if (!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)) {\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n","var ctx = require('./_ctx');\nvar invoke = require('./_invoke');\nvar html = require('./_html');\nvar cel = require('./_dom-create');\nvar global = require('./_global');\nvar process = global.process;\nvar setTask = global.setImmediate;\nvar clearTask = global.clearImmediate;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\nvar run = function () {\n  var id = +this;\n  // eslint-disable-next-line no-prototype-builtins\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function (event) {\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!setTask || !clearTask) {\n  setTask = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (require('./_cof')(process) == 'process') {\n    defer = function (id) {\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if (MessageChannel) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {\n    defer = function (id) {\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in cel('script')) {\n    defer = function (id) {\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set: setTask,\n  clear: clearTask\n};\n","var ctx = require('./_ctx');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar anObject = require('./_an-object');\nvar toLength = require('./_to-length');\nvar getIterFn = require('./core.get-iterator-method');\nvar BREAK = {};\nvar RETURN = {};\nvar exports = module.exports = function (iterable, entries, fn, that, ITERATOR) {\n  var iterFn = ITERATOR ? function () { return iterable; } : getIterFn(iterable);\n  var f = ctx(fn, that, entries ? 2 : 1);\n  var index = 0;\n  var length, step, iterator, result;\n  if (typeof iterFn != 'function') throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if (isArrayIter(iterFn)) for (length = toLength(iterable.length); length > index; index++) {\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if (result === BREAK || result === RETURN) return result;\n  } else for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;) {\n    result = call(iterator, f, step.value, entries);\n    if (result === BREAK || result === RETURN) return result;\n  }\n};\nexports.BREAK = BREAK;\nexports.RETURN = RETURN;\n","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject = require('./_an-object');\nvar aFunction = require('./_a-function');\nvar SPECIES = require('./_wks')('species');\nmodule.exports = function (O, D) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function (fn, args, that) {\n  var un = that === undefined;\n  switch (args.length) {\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return fn.apply(that, args);\n};\n","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n","'use strict';\nvar LIBRARY = require('./_library');\nvar global = require('./_global');\nvar ctx = require('./_ctx');\nvar classof = require('./_classof');\nvar $export = require('./_export');\nvar isObject = require('./_is-object');\nvar aFunction = require('./_a-function');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar speciesConstructor = require('./_species-constructor');\nvar task = require('./_task').set;\nvar microtask = require('./_microtask')();\nvar newPromiseCapabilityModule = require('./_new-promise-capability');\nvar perform = require('./_perform');\nvar userAgent = require('./_user-agent');\nvar promiseResolve = require('./_promise-resolve');\nvar PROMISE = 'Promise';\nvar TypeError = global.TypeError;\nvar process = global.process;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8 || '';\nvar $Promise = global[PROMISE];\nvar isNode = classof(process) == 'process';\nvar empty = function () { /* empty */ };\nvar Internal, newGenericPromiseCapability, OwnPromiseCapability, Wrapper;\nvar newPromiseCapability = newGenericPromiseCapability = newPromiseCapabilityModule.f;\n\nvar USE_NATIVE = !!function () {\n  try {\n    // correct subclassing with @@species support\n    var promise = $Promise.resolve(1);\n    var FakePromise = (promise.constructor = {})[require('./_wks')('species')] = function (exec) {\n      exec(empty, empty);\n    };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function')\n      && promise.then(empty) instanceof FakePromise\n      // v8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\n      // we can't detect it synchronously, so just check versions\n      && v8.indexOf('6.6') !== 0\n      && userAgent.indexOf('Chrome/66') === -1;\n  } catch (e) { /* empty */ }\n}();\n\n// helpers\nvar isThenable = function (it) {\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar notify = function (promise, isReject) {\n  if (promise._n) return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function () {\n    var value = promise._v;\n    var ok = promise._s == 1;\n    var i = 0;\n    var run = function (reaction) {\n      var handler = ok ? reaction.ok : reaction.fail;\n      var resolve = reaction.resolve;\n      var reject = reaction.reject;\n      var domain = reaction.domain;\n      var result, then, exited;\n      try {\n        if (handler) {\n          if (!ok) {\n            if (promise._h == 2) onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if (handler === true) result = value;\n          else {\n            if (domain) domain.enter();\n            result = handler(value); // may throw\n            if (domain) {\n              domain.exit();\n              exited = true;\n            }\n          }\n          if (result === reaction.promise) {\n            reject(TypeError('Promise-chain cycle'));\n          } else if (then = isThenable(result)) {\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch (e) {\n        if (domain && !exited) domain.exit();\n        reject(e);\n      }\n    };\n    while (chain.length > i) run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if (isReject && !promise._h) onUnhandled(promise);\n  });\n};\nvar onUnhandled = function (promise) {\n  task.call(global, function () {\n    var value = promise._v;\n    var unhandled = isUnhandled(promise);\n    var result, handler, console;\n    if (unhandled) {\n      result = perform(function () {\n        if (isNode) {\n          process.emit('unhandledRejection', value, promise);\n        } else if (handler = global.onunhandledrejection) {\n          handler({ promise: promise, reason: value });\n        } else if ((console = global.console) && console.error) {\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if (unhandled && result.e) throw result.v;\n  });\n};\nvar isUnhandled = function (promise) {\n  return promise._h !== 1 && (promise._a || promise._c).length === 0;\n};\nvar onHandleUnhandled = function (promise) {\n  task.call(global, function () {\n    var handler;\n    if (isNode) {\n      process.emit('rejectionHandled', promise);\n    } else if (handler = global.onrejectionhandled) {\n      handler({ promise: promise, reason: promise._v });\n    }\n  });\n};\nvar $reject = function (value) {\n  var promise = this;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if (!promise._a) promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function (value) {\n  var promise = this;\n  var then;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if (promise === value) throw TypeError(\"Promise can't be resolved itself\");\n    if (then = isThenable(value)) {\n      microtask(function () {\n        var wrapper = { _w: promise, _d: false }; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch (e) {\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch (e) {\n    $reject.call({ _w: promise, _d: false }, e); // wrap\n  }\n};\n\n// constructor polyfill\nif (!USE_NATIVE) {\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor) {\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch (err) {\n      $reject.call(this, err);\n    }\n  };\n  // eslint-disable-next-line no-unused-vars\n  Internal = function Promise(executor) {\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = require('./_redefine-all')($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected) {\n      var reaction = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if (this._a) this._a.push(reaction);\n      if (this._s) notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function (onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject = ctx($reject, promise, 1);\n  };\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\n    return C === $Promise || C === Wrapper\n      ? new OwnPromiseCapability(C)\n      : newGenericPromiseCapability(C);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Promise: $Promise });\nrequire('./_set-to-string-tag')($Promise, PROMISE);\nrequire('./_set-species')(PROMISE);\nWrapper = require('./_core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this);\n    var $$reject = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x) {\n    return promiseResolve(LIBRARY && this === Wrapper ? $Promise : this, x);\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./_iter-detect')(function (iter) {\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var values = [];\n      var index = 0;\n      var remaining = 1;\n      forOf(iterable, false, function (promise) {\n        var $index = index++;\n        var alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      forOf(iterable, false, function (promise) {\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  }\n});\n","var global = require('./_global');\nvar macrotask = require('./_task').set;\nvar Observer = global.MutationObserver || global.WebKitMutationObserver;\nvar process = global.process;\nvar Promise = global.Promise;\nvar isNode = require('./_cof')(process) == 'process';\n\nmodule.exports = function () {\n  var head, last, notify;\n\n  var flush = function () {\n    var parent, fn;\n    if (isNode && (parent = process.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (e) {\n        if (head) notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // Node.js\n  if (isNode) {\n    notify = function () {\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver, except iOS Safari - https://github.com/zloirock/core-js/issues/339\n  } else if (Observer && !(global.navigator && global.navigator.standalone)) {\n    var toggle = true;\n    var node = document.createTextNode('');\n    new Observer(flush).observe(node, { characterData: true }); // eslint-disable-line no-new\n    notify = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (Promise && Promise.resolve) {\n    // Promise.resolve without an argument throws an error in LG WebOS 2\n    var promise = Promise.resolve(undefined);\n    notify = function () {\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function () {\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function (fn) {\n    var task = { fn: fn, next: undefined };\n    if (last) last.next = task;\n    if (!head) {\n      head = task;\n      notify();\n    } last = task;\n  };\n};\n","module.exports = function (exec) {\n  try {\n    return { e: false, v: exec() };\n  } catch (e) {\n    return { e: true, v: e };\n  }\n};\n","var global = require('./_global');\nvar navigator = global.navigator;\n\nmodule.exports = navigator && navigator.userAgent || '';\n","var anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar newPromiseCapability = require('./_new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n","var def = require('./_object-dp').f;\nvar has = require('./_has');\nvar TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n","'use strict';\nvar global = require('./_global');\nvar dP = require('./_object-dp');\nvar DESCRIPTORS = require('./_descriptors');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (KEY) {\n  var C = global[KEY];\n  if (DESCRIPTORS && C && !C[SPECIES]) dP.f(C, SPECIES, {\n    configurable: true,\n    get: function () { return this; }\n  });\n};\n","var redefine = require('./_redefine');\nmodule.exports = function (target, src, safe) {\n  for (var key in src) redefine(target, key, src[key], safe);\n  return target;\n};\n","var META = require('./_uid')('meta');\nvar isObject = require('./_is-object');\nvar has = require('./_has');\nvar setDesc = require('./_object-dp').f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !require('./_fails')(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n","exports.f = require('./_wks');\n","var global = require('./_global');\nvar core = require('./_core');\nvar LIBRARY = require('./_library');\nvar wksExt = require('./_wks-ext');\nvar defineProperty = require('./_object-dp').f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n","exports.f = Object.getOwnPropertySymbols;\n","exports.f = {}.propertyIsEnumerable;\n","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n","var dP = require('./_object-dp');\nvar anObject = require('./_an-object');\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\nvar dPs = require('./_object-dps');\nvar enumBugKeys = require('./_enum-bug-keys');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = require('./_object-keys-internal');\nvar hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject');\nvar gOPN = require('./_object-gopn').f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n","var pIE = require('./_object-pie');\nvar createDesc = require('./_property-desc');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar has = require('./_has');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n","'use strict';\n// ECMAScript 6 symbols shim\nvar global = require('./_global');\nvar has = require('./_has');\nvar DESCRIPTORS = require('./_descriptors');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar META = require('./_meta').KEY;\nvar $fails = require('./_fails');\nvar shared = require('./_shared');\nvar setToStringTag = require('./_set-to-string-tag');\nvar uid = require('./_uid');\nvar wks = require('./_wks');\nvar wksExt = require('./_wks-ext');\nvar wksDefine = require('./_wks-define');\nvar enumKeys = require('./_enum-keys');\nvar isArray = require('./_is-array');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar createDesc = require('./_property-desc');\nvar _create = require('./_object-create');\nvar gOPNExt = require('./_object-gopn-ext');\nvar $GOPD = require('./_object-gopd');\nvar $DP = require('./_object-dp');\nvar $keys = require('./_object-keys');\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function';\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f = $propertyIsEnumerable;\n  require('./_object-gops').f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !require('./_library')) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');\n    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    $replacer = replacer = args[1];\n    if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    if (!isArray(replacer)) replacer = function (key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n","/**\n * Copyright (c) 2014, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * https://raw.github.com/facebook/regenerator/master/LICENSE file. An\n * additional grant of patent rights can be found in the PATENTS file in\n * the same directory.\n */\n\n!(function(global) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  var inModule = typeof module === \"object\";\n  var runtime = global.regeneratorRuntime;\n  if (runtime) {\n    if (inModule) {\n      // If regeneratorRuntime is defined globally and we're in a module,\n      // make the exports object identical to regeneratorRuntime.\n      module.exports = runtime;\n    }\n    // Don't bother evaluating the rest of this file if the runtime was\n    // already defined globally.\n    return;\n  }\n\n  // Define the runtime globally (as expected by generated code) as either\n  // module.exports (if we're in a module) or a new, empty object.\n  runtime = global.regeneratorRuntime = inModule ? module.exports : {};\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  runtime.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  runtime.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  runtime.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  runtime.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration. If the Promise is rejected, however, the\n          // result for this iteration will be rejected with the same\n          // reason. Note that rejections of yielded Promises are not\n          // thrown back into the generator function, as is the case\n          // when an awaited Promise is rejected. This difference in\n          // behavior between yield and await is important, because it\n          // allows the consumer to decide what to do with the yielded\n          // rejection (swallow it and continue, manually .throw it back\n          // into the generator, abandon iteration, whatever). With\n          // await, by contrast, there is no opportunity to examine the\n          // rejection reason outside the generator function, so the\n          // only option is to throw it from the await expression, and\n          // let the generator function handle the exception.\n          result.value = unwrapped;\n          resolve(result);\n        }, reject);\n      }\n    }\n\n    if (typeof global.process === \"object\" && global.process.domain) {\n      invoke = global.process.domain.bind(invoke);\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  runtime.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  runtime.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return runtime.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        if (delegate.iterator.return) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  runtime.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  runtime.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n})(\n  // Among the various tricks for obtaining a reference to the global\n  // object, this seems to be the most reliable technique that does not\n  // use indirect eval (which violates Content Security Policy).\n  typeof global === \"object\" ? global :\n  typeof window === \"object\" ? window :\n  typeof self === \"object\" ? self : this\n);\n","\n/**\n * @fileoverview Polyfills included for Emojityper on non-module browsers.\n */\n\nimport '../../node_modules/core-js/modules/es6.string.starts-with';\nimport '../../node_modules/core-js/modules/es6.string.from-code-point';\nimport '../../node_modules/core-js/modules/es6.array.from';\nimport '../../node_modules/core-js/modules/es6.promise';\nimport '../../node_modules/core-js/modules/es6.symbol';\n\n// IE11 CustomEvent\nif (typeof window.CustomEvent !== 'function') {\n  function CustomEvent(name, params) {\n    params = params || {bubbles: false, cancelable: false, detail: undefined};\n    const event = document.createEvent('CustomEvent');\n    event.initCustomEvent(name, params.bubbles, params.cancelable, params.detail);\n    return event;\n  }\n  CustomEvent.prototype = window.Event.prototype;\n  window.CustomEvent = CustomEvent;\n}\n\n// IE11 Element.remove\nif (!Element.prototype.hasOwnProperty('remove')) {\n  Object.defineProperty(Element.prototype, 'remove', {\n    configurable: true,\n    enumerable: true,\n    writable: true,\n    value: function remove() {\n      this.parentNode && this.parentNode.removeChild(this);\n    },\n  });\n}\n\n// IE11 classList.toggle 2nd arg\nconst testEl = document.createElement('div');\ntestEl.classList.toggle('testClass', false);\nif (testEl.classList.contains('testClass')) {\n  const original = DOMTokenList.prototype.toggle;\n  DOMTokenList.prototype.toggle = function(name, force) {\n    if (force === undefined) {\n      return original.call(this, name);\n    } else if (force) {\n      this.add(name);\n    } else {\n      this.remove(name);\n    }\n    return this.contains(name);\n  };\n}\n\n// non-polyfill for window.fetch\nif (!window.fetch) {\n  window.fetch = () => Promise.reject('unsupported');\n}\n\n// for async/await magic\n// nb. this puts regeneratorRuntime into the top-level scope\nimport '../../node_modules/regenerator-runtime/runtime.js';\n","\nconst arrowKeys = ['Left', 'Right', 'Up', 'Down'];\n\n/**\n * @param {!Event} ev\n * @return {?string} one of \"Arrow{Left,Right,Up,Down}\" if this is a keyboard event of that arrow\n */\nexport function arrowFromEvent(ev) {\n  if (!ev.key) {\n    return null;\n  }\n  if (ev.key.startsWith('Arrow')) {\n    return ev.key;\n  }\n  if (arrowKeys.indexOf(ev.key) === -1) {\n    return null;\n  }\n  return 'Arrow' + ev.key;\n}\n\n/**\n * @param {!Event} ev\n * @return {boolean} whether this is probably a keyboard/non-mouse click\n */\nexport function isKeyboardClick(ev) {\n  if (!(ev instanceof MouseEvent)) {\n    return true;\n  }\n  return (ev.screenX === 0 && ev.detail === 0) || ev.webkitForce === 0;\n}","\nlet dummy;\n\nexport function copyText(text) {\n  if (!dummy) {\n    dummy = document.createElement('input');\n    dummy.style.position = 'fixed';\n    dummy.style.opacity = 0;\n    document.body.appendChild(dummy);\n  }\n\n  dummy.value = text;\n  try {\n    dummy.hidden = false;\n    dummy.focus();\n    dummy.selectionStart = 0;\n    dummy.selectionEnd = dummy.value.length;\n    document.execCommand('copy');\n  } catch (e) {\n    return false;\n  } finally {\n    dummy.hidden = true;\n  }\n\n  return true;\n}","\nconst canvas = document.createElement('canvas');\nconst context = canvas.getContext('2d');\ncontext.font = '1px monospace';\n\n/**\n * @param {string} string to measure\n * @return {number} length of text in monospace units\n */\nconst measureText = (function() {\n  let cache = {};\n  let count = 0;\n\n  return s => {\n    let result = cache[s];\n    if (result === undefined) {\n      cache[s] = result = context.measureText(s).width;\n      if (++count > 4000) {\n        // nb. at June 2017, there's about ~1,800 emojis including variations, so this number is\n        // probably greater than we'll ever use: still, empty if it's too big\n        cache = {};\n        count = 0;\n      }\n    }\n    return result;\n  };\n}());\n\n/**\n * @type {boolean} whether this platform probably has fixed width emoji\n */\nconst fixedWidthEmoji = Boolean(/Mac|Android|iP(hone|od|ad)/.exec(navigator.platform));\n\n/**\n * @param {string} string to measure\n * @return {boolean} whether this is a single char long (and probably a single emoji)\n */\nconst isSingle = (function() {\n  const debugMode = window.location.search.indexOf('debug') !== -1;\n\n  // get a baseline emoji width: this is the well-supported 'FACE WITH TEARS OF JOY'\n  const emojiWidth = measureText('\\u{1f602}');\n  if (fixedWidthEmoji) {\n    if (debugMode) {\n      console.info('fixed emoji width is', emojiWidth, 'for \\u{1f602}');\n      return (s) => {\n        const ok = measureText(s) === emojiWidth;\n        if (!ok) {\n          console.debug('isSingle can\\'t render', s, 'width', measureText(s));\n        }\n        return ok;\n      };\n    }\n    // great! We can quickly check this!\n    return (s) => measureText(s) === emojiWidth;\n  }\n\n  const invalidWidth = context.measureText('\\u{ffffd}').width;\n  const characterWidth = context.measureText('a').width;\n  if (debugMode) {\n    console.info('invalid char has width', invalidWidth, 'ascii char has width', characterWidth);\n  }\n  return (s) => {\n    const width = measureText(s);\n    if (debugMode) {\n      console.debug('isSingle', s, 'has width', width);\n    }\n    return (width !== invalidWidth && width < invalidWidth * 2 && width > characterWidth) ||\n        width === emojiWidth;\n  };\n}());\n\n/**\n * Is this string rendering correctly as an emoji or sequence of emojis? On variable width\n * platforms, this can take O(n).\n *\n * @param {string} string to check\n * @return {boolean} whether this is probably an emoji\n */\nexport const isExpectedLength = (function() {\n  // FIXME: This treats ZWJ'ed characters that aren't a single char as invalid. Maybe it's not\n  // worth worrying, but instead just checking that all the points are valid emoji.\n\n  if (fixedWidthEmoji) {\n    // use 'FACE WITH TEARS OF JOY'\n    const emojiWidth = measureText('\\u{1f602}');\n    return (s) => {\n      // emojis could be _smaller_ than expected, but not larger- and not random non-unit widths\n      const points = jsdecode(s);\n      const chars = splitEmoji(points);\n\n      // count flags, reduce expected by / 2\n      const flags = chars.reduce((total, char) => total += isFlagPoint(char[0].point) ? 1 : 0, 0);\n      const expectedLength = chars.length - Math.ceil(flags / 2);\n\n      const width = measureText(s) / emojiWidth;\n\n      // does this have non-emoji characters in it?\n      if (Math.floor(width) !== width) { return false; }\n\n      // otherwise, as long as we're equal or smaller\n      return width <= expectedLength;\n    };\n  }\n\n  const invalidWidth = context.measureText('\\u{ffffd}').width;\n  return (s) => {\n    const points = jsdecode(s);\n    const chars = splitEmoji(points);\n    const clen = chars.length;\n    for (let i = 0; i < clen; ++i) {\n      const char = chars[i];\n      if (char.length === 0 && isFlagPoint(char[0].point)) {\n        continue;  // treat flag chars as A-OK\n      }\n      // measure this particular point and ensure it's single.\n      const s = String.fromCodePoint(...char.map(c => c.point));\n      if (!isSingle(s)) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n}());\n\n/**\n * True if the standard \"female\" icon can be varied with a diversity modifier. This is the basic\n * level of emoji diversity support, but doesn't imply support for all the professions.\n *\n * @type {boolean}\n */\nconst basicDiversity = (measureText('\\u{1f468}\\u{1f3fb}') === measureText('\\u{1f468}'));\n\n/**\n * @param {number} p\n * @return {boolean} whether the passed rune is a gender character\n */\nfunction isPointGender(p) {\n  return p === 0x2640 || p === 0x2642;\n}\n\n/**\n * @param {number} p\n * @return {boolean} whether the passed rune is a basic emoji person gender: Man or Woman\n */\nfunction isPersonGender(p) {\n  return p === 0x1f468 || p === 0x1f469;\n}\n\n/**\n * @param {number} p\n * @return {boolean} whether this is a subordinate member of a family sequence: boy/girl/baby\n */\nfunction isFamilyMember(p) {\n  return p === 0x1f476 || p === 0x1f466 || p === 0x1f467;\n}\n\n/**\n * @param {number} p\n * @return {boolean} whether the passed rune is a Variation_Selector\n */\nfunction isVariationSelector(p) {\n  return (p >= 0xfe00 && p <= 0xfe0f) || (p >= 0xe0100 && p <= 0xe01ef);\n}\n\n/**\n * @param {number} p\n * @return {boolean} whether the passed rune is a diversity selector (one of five skin tones)\n */\nfunction isDiversitySelector(p) {\n  return p >= 0x1f3fb && p <= 0x1f3ff;\n}\n\n/**\n * @param {number} p\n * @return {boolean} whether the passed rune is one of A-Z for flags\n */\nfunction isFlagPoint(p) {\n  return p >= 0x1f1e6 && p <= 0x1f1ff;\n}\n\n/**\n * @param {number} p\n * @return {boolean} whether the passed rune is probably not a modifier base\n */\nfunction unlikelyModifierBase(p) {\n  return p < 0x261d || isPointGender(p) || isVariationSelector(p) || isDiversitySelector(p) ||\n      isFlagPoint(p);\n}\n\n/**\n * Decodes a JavaScript string into Unicode code points.\n *\n * @param {string} s to decode\n * @return {!Array<number>} code points\n */\nfunction jsdecode(s) {\n  const len = s.length;\n  const points = [];\n\n  for (let i = 0; i < len;) {\n    const raw = s.charCodeAt(i++) || 0;\n    if (raw < 0xd800 || raw > 0xdbff || i === len) {\n      // not a high surrogate, or end of string\n    } else {\n      const extra = s.charCodeAt(i) || 0;\n      if ((extra & 0xfc00) === 0xdc00) {\n        // got a low surrogate, eat 2nd char\n        ++i;\n        points.push(0x10000 + (extra & 0x3ff) + ((raw & 0x3ff) << 10));\n        continue;\n      }\n    }\n    points.push(raw);\n  }\n\n  return points;\n}\n\n/**\n * Returns details about a character and whether it can be gender flipped to a single or neutral\n * gender. This contains emojis which, due to historical emoji reasons, aren't officially versions\n * of each other: e.g., Santa and Mrs. Claus, or Old {Man,Woman,Adult}.\n *\n * @param {number} point to look up in the other gender flips table\n * @return {{single: boolean, neutral: boolean, points: {f: number, m: number, n: number}}?}\n */\nconst genderFlip = (function() {\n  // TODO: covers F/M/neutral, but _not_ mixed (e.g. holding hands => no m/f combo)\n  const list = [\n    0x1f936, 0x1f385, 0,        // mrs. claus, santa\n    0x1f483, 0x1f57a, 0,        // dancers\n    0x1f470, 0x1f935, 0,        // bride, man in tuxedo\n    0x1f467, 0x1f466, 0x1f9d2,  // girl, boy, child\n    0x1f475, 0x1f474, 0x1f9d3,  // old {woman,man,adult}\n    0x1f46d, 0x1f46c, 0,        // women/men holding hands\n    0x1f478, 0x1f934, 0,        // princess, prince\n  ];\n\n  // build map with raw data only\n  const all = new Map();\n  for (let i = 0; i < list.length; i += 3) {\n    const data = {\n      points: {f: list[i], m: list[i+1], n: list[i+2]},\n    };\n    for (let j = 0; j < 3; ++j) {\n      const v = list[i+j];\n      if (v) {\n        if (all.has(v)) {\n          throw new Error('duplicate in gender list: ' + v);\n        }\n        all.set(v, data);\n      }\n    }\n  }\n\n  // return helper\n  return point => {\n    const out = all.get(point) || null;\n    if (out && out.single === undefined) {\n      // do the heavy lifting only when first fetched\n      out.single = isSingle(String.fromCodePoint(out.points.f)) &&\n          isSingle(String.fromCodePoint(out.points.m));\n      out.neutral = out.points.n && isSingle(String.fromCodePoint(out.points.n));\n    }\n    return out;\n  };\n}());\n\n/**\n * Splits a single emoji into raw characters, removing variants or diversity modifiers. Each\n * sub-array represents a character previously split by ZWJs.\n *\n * @param {!Array<number>} points\n * @return {!Array<!Array<{point: number, suffix: number}>>}\n */\nfunction splitEmoji(points) {\n  if (!points.length) {\n    return [];\n  }\n  let curr = [{point: points[0], suffix: 0}];\n  const out = [curr];\n\n  // TODO: doesn't deal with flags or regional letters\n  // flags are weird: U + N + A, for instance, will render the Namibia flag where the UN flag is\n  // not supported (but the UN flag where it is)- taking the left-most valid code\n  // NOTE: the regional flag letters are seen as _emoji_ on their own, at least on Mac.\n\n  for (let i = 1; i < points.length; ++i) {\n    const check = points[i];\n\n    if (isFlagPoint(curr[curr.length-1].point)) {\n      // previous was a flag, create a new one\n    } else if (isDiversitySelector(check) || isVariationSelector(check)) {\n      // store in suffix\n      curr[curr.length-1].suffix = check;\n      continue;\n    } else if (check === 0x200d) {\n      // push next char onto curr\n      const next = points[++i];\n      next && curr.push({point: next, suffix: 0});\n      continue;\n    }\n\n    // new character, reset\n    curr = [{point: check, suffix: 0}];\n    out.push(curr);\n  }\n  return out;\n}\n\n/**\n * Analyses or modifes an emoji string for modifier support: diversity and gender.\n *\n * This might be O(n), including the cost of measuring every individual character via measureText.\n *\n * @param {string} s\n * @param {{tone: undefined|number, gender: undefined|string}=} opt_op\n * @return {out: (string|undefined), tone: boolean, gender: {single: boolean, double: boolean, neutral: boolean}}\n */\nexport function modify(s, opt_op) {\n  const stats = {tone: false, gender: {single: false, double: false, neutral: false}};\n  if (!s) {\n    return stats;\n  }\n  const points = jsdecode(s);\n\n  // split out gender modifiers and other variations with splitEmoji, walk chars\n  const chars = splitEmoji(points);\n  const record = (opt_op ? [] : null);\n  chars.some((char, i) => {\n    const first = char[0].point;\n    let genderable = 0;\n    let family = false;\n\n    // search for existing gender characters\n    char.forEach(ch => {\n      const p = ch.point;\n      if (isPointGender(p)) {\n        // we can remove or replace the point\n        stats.gender.single = true;\n        stats.gender.neutral = true;\n      } else if (isPersonGender(p)) {\n        // easily swappable person\n        stats.gender.single = true;\n        if (++genderable >= 2) {\n          stats.gender.double = true;\n        }\n      } else if (isFamilyMember(p) && genderable) {\n        // this run is a family (child and already has parent), so it can't be made diverse\n        family = true;\n      } else {\n        // look for potential gender flips\n        const flip = genderFlip(p);\n        if (flip) {\n          stats.gender.single |= flip.single;\n          stats.gender.neutral |= flip.neutral;\n        }\n      }\n    });\n\n    // check for professions ('non family person'): single initial person gender, not a family\n    const isSinglePerson =\n        genderable ? (isPersonGender(first) && genderable === 1 && !family) : undefined;\n    if (isSinglePerson) {\n      stats.tone = basicDiversity;\n    }\n    if (record) {\n      // true: is a 'non family person', aka profession or disembodied head (diversity OK)\n      // false: is a family or other combined group of persons (no diversity)\n      // undefined: something else\n      record[i] = isSinglePerson;\n    }\n\n    // check for early exhaustive answer\n    if ((stats.tone || !basicDiversity) && stats.gender.neutral) {\n      // ... don't finish 'some' early if we're recording gender data\n      return !record && stats.gender.single && stats.gender.double;\n    }\n\n    // skip if profession, low emojis (everything below Emoji_Modifier_Base) and male/female signs\n    if (isSinglePerson === false || unlikelyModifierBase(first)) { return; }\n\n    // do slow measure checks\n    // TODO: can we use \\p{Modifier_Base} as a faster check than measureText for +ve case?\n    const candidate = String.fromCodePoint(first);\n    if (basicDiversity && !stats.tone && isSingle(candidate + '\\u{1f3fb}')) {\n      stats.tone = true;\n    }\n    if (!stats.gender.neutral && isSingle(candidate + '\\u{200d}\\u{2640}\\u{fe0f}')) {\n      stats.gender.neutral = true;\n      stats.gender.single = true;\n    }\n  });\n\n  // early out without op\n  if (!opt_op) {\n    return stats;\n  }\n\n  // gender helper: modifies passed character to apply next gender (or returns new ch)\n  const nextGenderPoint = (function() {\n    const g = opt_op.gender || '';\n    let previousMaster;\n    let index;\n    return (master, opt_point, opt_allowOtherFlip) => {\n      if (previousMaster === undefined || master !== previousMaster) {\n        previousMaster = master;\n        index = 0;\n      } else {\n        ++index;\n      }\n      const next = g ? g[index % g.length] : '';\n      const point = opt_point || 0;\n      if (isPersonGender(point)) {\n        // if this is a person, return the alternative person (or make no change)\n        return next ? (next === 'm' ? 0x1f468 : 0x1f469) : point;\n      } else if (!point || isPointGender(point)) {\n        // if this is a point, return the alternative point (or clear)\n        return next ? (next === 'm' ? 0x2642 : 0x2640) : 0;\n      } else if (opt_allowOtherFlip) {\n        // do other gender flips: note that some of these have F/M/N, but not all have N\n        const flip = genderFlip(point);\n        if (flip) {\n          if (!next && flip.neutral) {\n            return flip.points.n;\n          } else if (next && flip.single) {\n            return next === 'm' ? flip.points.m : flip.points.f;\n          }\n        }\n      }\n      // didn't consume anything\n      --index;\n      return point;\n    };\n  }());\n\n  // walk over all chars, apply change\n  const out = chars.map((char, i) => {\n    const points = [];  // used as nonce, declare first\n    const isSinglePerson = record[i];\n    const first = char[0].point;\n\n    if (opt_op.gender !== undefined) {\n      // replace/remove existing male/female characters\n      // nb. this removes orphaned gender point characters\n      const allowOtherFlip = (isSinglePerson === undefined);  // not for family/profession\n      char.forEach(ch => ch.point = nextGenderPoint(points, ch.point, allowOtherFlip));\n\n      // under various conditions, add a gender modifier to a single point\n      if (isSinglePerson === undefined && char.length === 1 && !isPointGender(first)) {\n        const genderPoint = nextGenderPoint(points);\n        if (genderPoint && isSingle(String.fromCodePoint(first) + '\\u{200d}\\u{2640}\\u{fe0f}')) {\n          char.push({suffix: 0xfe0f, point: genderPoint});\n        }\n      }\n    }\n\n    // apply diversity\n    if (opt_op.tone !== undefined) {\n      char.forEach((ch, i) => {\n        if (isDiversitySelector(ch.suffix)) {\n          // always tweak existing diversity modifiers\n          ch.suffix = opt_op.tone;\n        } else if (i === 0 && basicDiversity && isSinglePerson !== false) {\n          // if it's the first point in a non-family, try to apply diversity\n          if (isSinglePerson || isSingle(String.fromCodePoint(first) + '\\u{1f3fb}')) {\n            ch.suffix = opt_op.tone;\n          }\n        }\n      });\n    }\n\n    // flatten into actual codepoints again\n    char.forEach(ch => {\n      if (ch.point) {\n        points.length && points.push(0x200d);\n        points.push(ch.point);\n        ch.suffix && points.push(ch.suffix);\n      }\n    });\n    return points;\n  }).reduce((all, points) => all.concat(points), []);\n\n  stats.out = String.fromCodePoint(...out);\n  return stats;\n};\n","\n// TODO(samthor): Just use this on supported browsers.\n// const re = new RegExp(/(?:[\\p{Letter}\\p{Number}])/u);\n\nfunction letterAt(text, pos) {\n  const code = text.charCodeAt(pos);\n  const after = text.charCodeAt(pos + 1);\n\n  if (after === 0xfe0f) {\n    return false;  // VS16 follows\n  }\n\n  // return Boolean(re.exec(text.substr(pos, 1)));\n  return code < 5000 && code > 32;\n}\n\nexport function match(text, at) {\n  let from = at;\n  let to = at;\n\n  // are we at the end (only have spaces until end)?\n  const isAtEnd = text.substr(at).trim() === '';\n  const isNotWordAfter = isAtEnd || !letterAt(text, at);\n\n  if (isNotWordAfter) {\n    for (; to > 0; --to) {\n      if (text.charCodeAt(to - 1) > 32) {\n        break;\n      }\n    }\n    if (to < from) {\n      from = to;\n    }\n  }\n\n  // walk backwards while the previous character is a word\n  for (; from > 0; --from) {\n    if (!letterAt(text, from - 1)) {\n      break;\n    }\n  }\n\n  // walk forwards while the next char is not a space\n  for (; to < text.length; ++to) {\n    if (!letterAt(text, to)) {\n      break;\n    }\n  }\n\n  if (from > to) {\n    from = to;\n  }\n  return {from, to};\n}","\nimport * as modifier from './lib/modifier.js';\nimport * as word from './lib/word.js';\n\nfunction datasetSafeDelete(el, ...keys) {\n  const d = el.dataset;\n  keys.forEach((key) => {\n    if (key in d) {\n      delete d[key];\n    }\n  });\n}\n\nconst upgraded = new WeakMap();\n\nexport function cursorPosition(el) {\n  const fn = upgraded.get(el);\n  if (fn !== undefined) {\n    return fn();\n  }\n  return undefined;\n}\n\n// word focus handler\nfunction upgrade(el) {\n  if (upgraded.has(el)) {\n    return false;\n  }\n\n  // stores the faux-selection shown (different from actual selection in 'state')\n  const sel = {\n    from: el.selectionStart,\n    to: el.selectionEnd,\n  };\n\n  const helper = document.createElement('div');\n  helper.className = 'overflow-helper';\n  el.parentNode.insertBefore(helper, el);\n\n  const underline = document.createElement('div');\n  underline.className = 'underline';\n  helper.appendChild(underline);\n\n  let suggest = null;\n  const autocomplete = document.createElement('div');\n  autocomplete.className = 'autocomplete sizer';\n  helper.appendChild(autocomplete);\n\n  // measures the width of text\n  const measureText = (function() {\n    const sizer = document.createElement('div');\n    sizer.className = 'sizer';\n    helper.appendChild(sizer);\n\n    const nonce = document.createElement('div');\n    nonce.className = 'nonce';\n\n    return (text) => {\n      sizer.textContent = text;\n      sizer.appendChild(nonce);\n      return nonce.offsetLeft;\n    }\n  }());\n\n  // record upgraded measurer for callers to find our pixel position\n  upgraded.set(el, () => {\n    const mid = ~~((el.selectionStart + el.selectionEnd) / 2)\n    return measureText(el.value.substr(0, mid)) - el.scrollLeft;\n  });\n\n  // hide underline until load: the font used might not be ready, so it's probably out of whack\n  if (document.readyState !== 'complete') {\n    underline.classList.add('loading');\n    window.addEventListener('load', (ev) => {\n      renderLine();\n      underline.classList.remove('loading');\n    });\n  }\n\n  const renderLine = () => {\n    if (sel.from >= sel.to) {\n      underline.hidden = true;\n      return false;\n    }\n    const {from, to} = sel;\n\n    // otherwise, record and draw the line\n    const left = measureText(el.value.substr(0, from));\n    const width = measureText(el.value.substr(from, to - from));\n\n    if (width < 0 && !document.getElementById('less')) {\n      // nb. this seems to happen in dev with lesscss\n      console.warn('invalid sizer width', width, 'for text', sizer.textContent);\n    }\n\n    underline.hidden = width <= 0;\n    underline.style.left = left + 'px';\n    underline.style.width = width + 'px';\n    underline.style.transform = `translateX(${-el.scrollLeft}px)`;\n\n    // TODO(samthor): put in div with underline so alignment is free?\n    autocomplete.style.transform = `translateX(${-el.scrollLeft + left + width}px)`;\n  };\n\n  // force selection\n  const setRange = (from, to) => {\n    sel.from = from;\n    sel.to = Math.max(from, to);\n    if (from >= to) {\n      datasetSafeDelete(el, 'prefix', 'word', 'focus');\n      underline.hidden = true;\n      return false;\n    }\n    el.dataset['focus'] = el.value.substr(from, to - from);\n    renderLine();\n    return true;\n  };\n\n  // rerender autocomplete word if valid\n  const renderAutocomplete = () => {\n    const s = el.dataset['prefix'] || '';\n    const valid = suggest !== null &&\n        s.length !== 0 &&\n        suggest[0].substr(0, s.length) === s &&\n        el.value.substr(sel.to).trim().length === 0;\n    if (!valid) {\n      autocomplete.textContent = '';\n      return false;\n    }\n    const display = suggest[0].substr(s.length) + suggest[1];\n    autocomplete.textContent = display;\n    return true;\n  };\n\n  // state/handler keep track of the current focus word (plus scroll position, if input is big)\n  const initialLength = el.value.length;\n  const state = {start: initialLength, end: initialLength, value: undefined};\n  const changeHandler = (permitNextChange) => {\n    if (permitNextChange !== false &&\n        el.selectionStart === state.start &&\n        el.selectionEnd === state.end &&\n        el.value === state.value) {\n      return true;  // already at this state\n    }\n    [state.start, state.end] = [el.selectionStart, el.selectionEnd];\n    if (state.value !== el.value) {\n      el.dispatchEvent(new CustomEvent('value', {detail: el.value}));\n      state.value = el.value;\n    }\n\n    // we're pretending to be the user's selection\n    if (state.start !== state.end) {\n      datasetSafeDelete(el, 'prefix', 'word');\n\n      setRange(state.start, state.end);\n\n      underline.classList.add('range');\n      el.classList.add('range');\n      return false;\n    }\n    underline.classList.remove('range');\n    el.classList.remove('range');\n\n    // if it's invalid and we were permitted (this is used for faux-highlights), ignore\n    const {from, to} = word.match(el.value, state.start);\n    if (from >= to && permitNextChange) {\n      return false;  // we just got an emoji, retain implicit selection until next change\n    }\n    if (setRange(from, to)) {\n      // if the range was valid, update the prefix/focus but delete the word (in typing state)\n      el.dataset['focus'] = el.dataset['prefix'] = el.value.substr(from, to - from).toLowerCase();\n      datasetSafeDelete(el, 'word');\n    }\n    return false;\n  };\n\n  // runs change handler and emits the 'word' event as appropriate\n  let previousDetail = {};\n  const mergedEventHandler = (events, permitNextChange) => {\n    // if there was a focus event, don't let the browser take over: reset previous known good\n    if (events.has('select-all')) {\n      // custom event generated by page.js\n      el.setSelectionRange(0, el.value.length);\n    } else if (events.has('select-end')) {\n      // custom event generated by options.js\n      el.setSelectionRange(el.value.length, el.value.length);\n    } else if (events.has('focus')) {\n      // TODO: this sets on initial load, even though it probably doesn't need to\n      el.setSelectionRange(state.start, state.end);\n    }\n\n    // run change handler: if true, nothing changed\n    // (nb. the logic before return is because autocompletes don't count for alreadyAtState)\n    const alreadyAtState = changeHandler(permitNextChange);\n\n    // clear suggestion if we tried to render it and it wasn't valid\n    if (!renderAutocomplete()) {\n      suggest = null;\n    }\n\n    // set dataset['copy'] to the value you'd copy if you hit enter right now\n    // TODO(samthor): Generate this only when we run a copy?\n    if (el.selectionStart !== el.selectionEnd) {\n      el.dataset['copy'] = el.value.substr(el.selectionStart, el.selectionEnd - el.selectionStart);\n    } else if (suggest !== null) {\n      el.dataset['copy'] = el.value.substr(0, sel.from) + el.value.substr(sel.to) + suggest[1];\n    } else {\n      el.dataset['copy'] = el.value;\n    }\n\n    // if nothing changed, don't trigger any option callbacks\n    if (alreadyAtState) { return; }\n\n    // send query: prefix or whole-word (unless nothing is focused)\n    const text = el.dataset['focus'] ? el.dataset['prefix'] || el.dataset['word'] || null : '';\n    const detail = {\n      text,\n      prefix: 'prefix' in el.dataset,\n      focus: el.dataset['focus'],\n      selection: (el.selectionStart !== el.selectionEnd),\n    };\n\n    // send event only if something has changed\n    if (detail.text !== previousDetail.text ||\n        detail.prefix !== previousDetail.prefix ||\n        detail.focus !== previousDetail.focus ||\n        detail.selection !== previousDetail.selection) {\n      previousDetail = detail;\n      el.dispatchEvent(new CustomEvent('query', {detail}));\n    }\n  };\n\n  // whether user typed space and nothing came out\n  let hasPendingSpace = false;\n\n  // dedup listeners on a rAF\n  let permitNextChange;  // FIXME: global-ish scope is ugly\n  (function() {\n    let frame;\n    let events = new Set();  // records the events that occured to cause this\n    const dedup = (ev) => {\n      if (!frame) {\n        permitNextChange = undefined;\n        events.clear();\n        frame = window.requestAnimationFrame(() => {\n          frame = null;\n          mergedEventHandler(events, permitNextChange);\n        });\n      }\n      ev && events.add(ev.type);\n    };\n\n    // lots of listeners for a million different change reasons\n    const rest = 'change keydown keypress focus click mousedown select input select-all select-end';\n    rest.split(/\\s+/).forEach((event) => el.addEventListener(event, dedup));\n    dedup();\n\n    // handle 'suggest' event: show default autocomplete option\n    el.addEventListener('suggest', (ev) => {\n      suggest = ev.detail;\n      if (hasPendingSpace) {\n        maybeReplace();\n      }\n      dedup();\n    });\n\n    // if a user is dragging around, this might be changing the offsetLeft (dragging input l/r)\n    el.addEventListener('mousemove', (ev) => {\n      if (ev.which) {\n        dedup();\n      }\n    });\n\n    // add 'selectionchange' (only valid on document) to listen to the initial long-press selection\n    // on Chrome (possibly others?) mobile: it doesn't generate 'select'.\n    document.addEventListener('selectionchange', (ev) => {\n      if (document.activeElement === el) {\n        dedup();\n      }\n    });\n  }());\n\n  function maybeReplace(expectSpace = false) {\n    if (el.selectionEnd < sel.to) {\n      // this was before the end of the selection, don't autocomplete\n      return false;\n    }\n\n    const text = el.dataset['prefix'] || '';\n    if (text.length === 0 || !suggest || !suggest[0].startsWith(text)) {\n      // no valid sugestion or no text anyway\n      return false;\n    }\n\n    const rest = el.value.substr(sel.to);\n    const mustBeSpace = rest.substr(0, el.selectionStart - sel.to);\n    const trimmed = mustBeSpace.trim();\n    if (trimmed.length !== 0) {\n      // this wasn't blank or space chars\n      return false;\n    } else if (expectSpace && !mustBeSpace.length) {\n      // there wasn't a space and we expected one\n      return false;\n    }\n\n    if (rest.trim().length !== 0 && suggest[0] !== text) {\n      // we're not the end of the string, so only autocomplete if it's entirely typed\n      return false;\n    }\n\n    // dispatch change request on ourselves\n    ga('send', 'event', 'options', 'typing');\n    const detail = {\n      choice: suggest[1],\n      word: suggest[0],\n    };\n    typer.dispatchEvent(new CustomEvent('emoji', {detail}));\n    return true;\n  }\n\n  // add a non-deduped keydown handler, to run before others and intercept space\n  el.addEventListener('keydown', (ev) => {\n    hasPendingSpace = false;\n    switch (ev.key) {\n    case 'Escape':\n      permitNextChange = false;  // force next change\n      break;\n\n    case 'ArrowDown':\n    case 'Down':\n    case 'ArrowUp':\n    case 'Up':\n      ev.preventDefault();  // disable normal up/down behavior to change focus\n      return;\n\n    case ' ':\n      const success = maybeReplace();\n      if (ev.shiftKey) {\n        ev.preventDefault();  // don't type space if shift held\n      }\n      if (!success) {\n        // hold this for when autocompletes arrive\n        hasPendingSpace = true;\n      }\n      break;\n    }\n  });\n\n  // add a non-deduped keyup handler, for space on mobile browsers ('dreaded keycode 229')\n  el.addEventListener('keyup', (ev) => {\n    // was it a 229 or no code, and was the typed character a space?\n    if (ev.keyCode === 229 || !ev.keyCode) {\n      // TODO: possibly record hasPendingSpace for future arriving suggestions\n      maybeReplace(true);\n    }\n  });\n\n  // dedup re-rendering calls\n  (function() {\n    let frame;\n    const dedupRenderLine = () => {\n      if (!frame) {\n        frame = window.requestAnimationFrame(() => {\n          frame = null;\n          renderLine();\n        });\n      }\n    };\n    window.addEventListener('resize', dedupRenderLine);\n    el.addEventListener('wheel', dedupRenderLine, {passive: true});\n  }());\n\n  // replace helper\n  const replaceFocus = (call) => {\n    const previousScrollLeft = el.scrollLeft;\n    const {from, to} = sel;\n    const value = el.value.substr(from, to - from);\n    let [start, end] = [typer.selectionStart, typer.selectionEnd];\n    const dir = typer.selectionDirection;\n\n    const update = call(value);\n    if (update == null) { return false; }\n\n    const prev = document.activeElement;\n\n    // select the region and 'type' it with insertText to provide undo/redo history\n    // nb. selecting the typer means that undo will always make us selected; probably fine\n    typer.focus();\n    typer.selectionStart = from;\n    typer.selectionEnd = to;\n    const expected = typer.value.substr(0, from) + update + typer.value.substr(to);\n    if (!document.execCommand('insertText', false, update) || typer.value !== expected) {\n      // set manually: this is fallback / Firefox mode\n      typer.value = typer.value.substr(0, from) + update + typer.value.substr(to);\n    }\n    typer.dispatchEvent(new CustomEvent('change'));  // nb. updates from/to (from won't change)\n\n    const drift = (where) => {\n      if (where >= to) {\n        // after the update\n        where = where - (to - from) + update.length;\n      } else if (where > from) {\n        // during the update\n        where = from + update.length;\n      } else {\n        // do nothing, was before\n      }\n      return where;\n    };\n\n    // pretend we were like this all along\n    [state.start, state.end] = [drift(start), drift(end)];\n    typer.setSelectionRange(state.start, state.end, dir);\n\n    // TODO(samthor): Safari refuses to make this focus after the first above.\n    prev && prev.focus();\n\n    permitNextChange = true;\n    el.scrollLeft = previousScrollLeft;  // before setRange, so the underline is correct\n    setRange(from, from + update.length);\n    return true;\n  };\n\n  // handle 'modifier' event: apply modifiers to the focus emoji, if any\n  el.addEventListener('modifier', (ev) => {\n    const arg = {[ev.detail.type]: ev.detail.code};\n    replaceFocus((value) => modifier.modify(value, arg).out);\n  });\n\n  // handle 'emoji' event: if there's a current focus word, then replace it with the new emoji \\o/\n  el.addEventListener('emoji', (ev) => {\n    const emoji = ev.detail.choice;\n    if (!replaceFocus(() => emoji)) { return; }\n\n    // listen to the caller's view on what word we should pretend this emoji is\n    el.dataset['word'] = ev.detail.word || '';\n    datasetSafeDelete(el, 'prefix');\n  });\n}\n\nupgrade(typer);\n","\nexport default function build(raw, prefixLength=3, maxSuggestions=10) {\n  const prefixSuggest = {};\n\n  const values = {};\n  raw.forEach(data => {\n    const k = data[0];\n    values[k] = data.slice(1);\n\n    const prefix = k.substr(0, prefixLength);\n    for (let i = 1; i <= prefix.length; ++i) {\n      const part = prefix.substr(0, i);\n      let opts = prefixSuggest[part];\n      if (!opts) {\n        opts = prefixSuggest[part] = [];\n      }\n      if (opts.length < maxSuggestions) {\n        opts.push(k);\n      }\n    }\n  });\n\n  return function(typed, prefix) {\n    typed = typed.toLowerCase();\n    const rest = typed.substr(prefixLength);\n    let all = prefixSuggest[typed.substr(0, prefixLength)] || [];\n\n    if (rest) {\n      all = all.filter(word => word.substr(prefixLength).startsWith(rest));\n    }\n    if (!prefix) {\n      all = all.filter(word => word === typed);\n    }\n    all = all.map(word => [word, ...values[word]]);\n\n    return all.length ? all : [];\n  }\n}\n","\nconst resolved = Promise.resolve();\n\n/**\n * Returns a Promise that resolves on `requestIdleCallback`.\n *\n * @return {!Promise<!IdleDeadline>}\n */\nexport function idle() {\n  return new Promise((resolve) => window.requestIdleCallback(resolve));\n}\n\n/**\n * Returns a Promise that resolves on `requestAnimationFrame`.\n *\n * @param {number=} delay whether to also delay by `setTimeout`\n * @return {!Promise<!IdleDeadline>}\n */\nexport function rAF(delay=undefined) {\n  if (delay !== undefined) {\n    return new Promise((resolve) => {\n      window.setTimeout(() => window.requestAnimationFrame(resolve), delay);\n    });\n  }\n  return new Promise((resolve) => window.requestAnimationFrame(resolve));\n}\n\n/**\n * Returns a Promise that resolves after a microtask.\n *\n * @return {!Promise<void>}\n */\nexport function microtask() {\n  return Promise.resolve();\n}\n\n/**\n * @return {{promise: !Promise<void>, resolver: function(): void}}\n */\nexport function resolver() {\n  let resolver;\n  const promise = new Promise((resolve) => resolver = resolve);\n  return {resolver, promise};\n}\n\n/**\n * @return {!Promise<void>}\n */\nexport function delay(ms=0) {\n  return new Promise((resolve) => window.setTimeout(resolve, ms));\n}\n\nconst debouceMap = new Map();\n\n/**\n * Returns a Promise that debounces a call to the passed callable.\n *\n * @template T\n * @param {function(): T} callable\n * @param {number=} delay\n * @return {!Promise<T>}\n */\nexport function debounce(callable, delay=0) {\n  let state = debouceMap.get(callable);\n  if (!state) {\n    state = {c: callable};\n    const p = new Promise((resolve) => state.r = resolve);\n    state.p = p.then(() => {\n      debouceMap.delete(callable);\n      return state.c();\n    });\n    debouceMap.set(callable, state);\n  }\n\n  window.clearTimeout(state.t);\n  state.t = window.setTimeout(state.r, Math.max(0, delay));\n\n  return state.p;\n}","\n/**\n * Remove duplicate entries from the passed array, only from the 1th index.\n *\n * @param {!Array<string>}\n * @return {!Array<string>}\n */\nfunction removeDuplicates(row) {\n  const found = new Set();\n  return row.filter((item, i) => {\n    if (i !== 0) {\n      if (found.has(item)) { return false; }\n      found.add(item);\n    }\n    return true;\n  });\n}\n\n/**\n * Merge the given results arrays. These will both be in the form of:\n *   [[name, emoji1, emoji2,....], ...]\n *\n * The first argument will be updated with the data from the second argument.\n *\n * @param {!Array<!Array<string>>} existing\n * @param {!Array<!Array<string>>} update\n */\nexport function merge(existing, update) {\n  const lookup = {};\n  existing.forEach((row, i) => lookup[row[0]] = i);\n\n  update.forEach((row) => {\n    const index = lookup[row[0]];\n    if (index === undefined) {\n      lookup[row[0]] = existing.length;  // in case there's dup data\n      existing.push(row);\n      return;\n    }\n\n    // otherwise, just append all new data and place back into array\n    const existingRow = existing[index];\n    const updatedData = row.slice(1);\n    existing[index] = removeDuplicates(existingRow.concat(updatedData));\n  });\n}","const api = 'https://emojibuff.appspot.com/api';\nconst recentLimit = 8;\nconst selectionDelay = 5 * 1000;\n\nimport build from './prefixgen.js';\nimport * as promises from './promises.js';\nimport * as results from './results.js';\n\n/**\n * @param {string} key for endpoint/cache\n * @param {number} expiry in hours\n * @param {(function(boolean): void)=} callback to call with true then false (for loading work)\n * @return {function(): !Promise<!Array<!Array<string>>}\n */\nfunction loaderFor(key, expiry=24, callback=() => {}) {\n  let promiseResults;\n\n  // TODO: refetch after >expiry, don't just invalidate\n\n  const raw = window.localStorage[key];\n  if (raw) {\n    let out;\n    try {\n      out = JSON.parse(raw);\n    } catch (e) {\n      console.debug('couldn\\'t parse localStorage', key, e);\n      out = null;\n    }\n    if (out && out['results']) {\n      promiseResults = Promise.resolve(out['results']);\n      if (out['created'] >= +new Date - (60 * 60 * 1000 * expiry)) {\n        // return immediately, it's less than one day old\n        return () => promiseResults;\n      }\n    }\n  }\n\n  // we don't have data or it's >1day old, refetch\n  // TODO(samthor): Break into retryable fetch.\n  const f = new Promise((resolve, reject) => {\n    const xhr = new XMLHttpRequest();\n    xhr.open('GET', `${api}/${key}`);\n    xhr.onerror = reject;\n    xhr.responseType = 'json';\n    xhr.onload = () => resolve(xhr.response);\n    xhr.send();\n  }).then((raw) => {\n    // IE11 doesn't respect responseType, and we always return an Object\n    return typeof raw === 'string' ? JSON.parse(raw) : raw;\n  }).then((update) => {\n    promiseResults = f;  // can return real results now\n\n    // store in localStorage for next time\n    update['created'] = +new Date();\n    window.localStorage[key] = JSON.stringify(update);\n\n    // return updated results\n    return update['results'];\n  });\n\n  // no local data, wait for data\n  if (!promiseResults) {\n    callback(true);                 // indicate working\n    f.then(() => callback(false));  // done\n    return () => f;\n  }\n\n  return () => promiseResults;\n}\n\n/**\n * Returns the local prefix search tool.\n *\n * @return {!Promise<function(string, boolean): !Array<!Array<string>>>}\n */\nconst getPrefixGen = (function() {\n  const loader = loaderFor('popular', 24, (working) => {\n    // TODO: It's a bit ugly to hit the loader from here.\n    window.loader.hidden = !working;\n  });\n  return () => {\n    return loader().then((results) => build(results))\n  };\n}());\n\n/**\n * Returns the trending emoji.\n *\n * @return {!Promise<!Array<string>>}\n */\nconst getTrendingEmoji = (function() {\n  const loader = loaderFor('hot', 1);\n  return () => {\n    return loader().then((results) => {\n      const out = [];\n      results.forEach((data) => {\n        out.push(...data.slice(1));  // drop name\n      });\n      return out;\n    });\n  };\n}());\n\n/**\n * Requests emoji completion.\n *\n * @param {string} text user has typed\n * @param {boolean} prefix is this a prefix search, or is it a definite whole word?\n * @param {boolean=} more whether to return lots more results for this query\n * @return {!Promise<!Array<!Array>>}\n */\nexport function request(text, prefix, more=false) {\n  if (!text) {\n    if (more && text === '') {\n      const r = recent();\n      r.unshift('^recent');\n\n      return getTrendingEmoji().then((p) => {\n        p.unshift('^trending');\n        return [r, p];\n      });\n    }\n\n    return Promise.resolve([]);\n  }\n\n  const localPromise = getPrefixGen().then((suggest) => suggest(text, prefix));\n  if (!more) {\n    return localPromise;\n  }\n\n  // TODO: At some point, the 'more' data should go into a local cache. For now, just fetch.\n  let url = `${api}/q?q=${window.encodeURIComponent(text)}`;\n  if (!prefix) {\n    url += '&exact';\n  }\n  const morePromise = window.fetch(url).then((out) => out.json()).then((out) => out['results']);\n  return Promise.all([localPromise, morePromise]).then((both) => {\n    const [local, more] = both;\n    results.merge(local, more);\n    return local;\n  });\n}\n\n/**\n * Records use of name/emoji pairs.\n *\n * @param {string} name used to select emoji\n * @param {string} emoji selected\n * @param {!Promise<!Response>} eventual response after delay\n */\nexport const select = (function() {\n  let pending = {};\n\n  const runner = () => {\n    const body = JSON.stringify(pending);\n    pending = {};  // clear pending for next time\n    return navigator.sendBeacon(api + '/sel', body);\n  };\n\n  return function select(name, emoji) {\n    if (name[0] === '^') {\n      return;  // do nothing\n    }\n\n    const r = recent();\n    const index = r.indexOf(emoji);\n    if (index !== -1) {\n      r.splice(index, 1);\n    }\n    r.unshift(emoji);\n    r.splice(recentLimit);\n    window.localStorage['recent'] = r.join(',');\n    // TODO: do something with recent emoji use\n\n    pending[name] = emoji;\n    return promises.debounce(runner, selectionDelay);\n  }\n}());\n\n/**\n * Submit the name of an emoji.\n *\n * @param {string} name\n * @param {string} emoji\n * @return {!Promise<Response>}\n */\nexport function submit(name, emoji) {\n  const body = new FormData();\n  body.append('name', name);\n  body.append('emoji', emoji);\n  return window.fetch(api + '/name', {method: 'POST', mode: 'cors', body});\n}\n\n/**\n * Gets recently used emoji.\n *\n * @return {!Array<string>}\n */\nexport function recent() {\n  return (window.localStorage['recent'] || '').split(',').filter((x) => x);\n}","\n/**\n * @fileoverview The validator runs constantly and validates emoji rendering.\n */\n\nimport {isExpectedLength} from './modifier.js';\nimport Worker from './worker.js';\n\nconst prefix = '-ok_';\nconst ls = window.localStorage;\nconst known = new Map();\n\nfunction runner(emoji) {\n  const key = prefix + emoji;\n  if (ls[key]) {\n    return true;\n  }\n\n  const out = isExpectedLength(emoji);\n  known.set(emoji, out);\n  if (out) {\n    ls[key] = 't';  // use dummy small string\n  }\n  return out;\n}\n\nconst worker = new Worker(runner);\n\n/**\n * As per isExpectedLength, but caches successful results.\n *\n * @param {string} string to check\n * @return {!Promise<boolean>} whether this is probably an emoji\n */\nexport async function valid(emoji) {\n  const immediate = known.get(emoji);\n  if (immediate !== undefined) {\n    return immediate;\n  }\n  return worker.task(emoji);\n}\n","\n/**\n * @fileoverview Emojityper's suggestion handler. Handles creation, showing etc of autocomplete\n * buttons in the UI.\n */\n\nimport * as provider from './lib/provider.js';\nimport * as modifier from './lib/modifier.js';\nimport {valid} from './lib/valid.js';\nimport * as promises from './lib/promises.js';\nimport * as eventlib from './lib/event.js';\nimport * as input from './input.js';\nimport * as copier from './lib/copier.js';\n\n/**\n * ButtonManager helps create and show emoji buttons in the UI.\n */\nclass ButtonManager {\n  constructor(holder) {\n    this.holder_ = holder;\n\n    /** @type {!Map<string, !HTMLElement>} */\n    this.options_ = new Map();\n\n    /** @type {!Map<string, !HTMLButtonElement>} */\n    this.buttons_ = new Map();\n\n    /** @type {!WeakMap<!HTMLButtonElement, !DocumentFragment>} */\n    this.buttonTarget_ = new WeakMap();\n\n    /** @type {!Array<!HTMLButtonElement} */\n    this.buttonPool_ = [];\n\n    window.requestIdleCallback(() => {\n      for (let i = 0; i < 10; ++i) {\n        this.buttonPool_.push(document.createElement('button'));\n      }\n    });\n\n    const modifierHolder = document.createElement('div');\n    this.holder_.appendChild(modifierHolder);\n\n    /** @type {function(this:ButtonManager, !Object): void} */\n    this.setModifier = (() => {\n      const genderOption = ButtonManager.optionType_('modifier', 'gender');\n      const toneOption = ButtonManager.optionType_('modifier', 'tone');\n      modifierHolder.appendChild(genderOption);\n      modifierHolder.appendChild(toneOption);\n\n      // helper to create buttons\n      const createModifierButton = (text, value=null) => {\n        const button = document.createElement('button');\n        button.textContent = text;\n        button.dataset['value'] = value;\n        return button;\n      };\n\n      // create gender options\n      const genders = [\n        createModifierButton('\\u{26AC}', ''),\n        createModifierButton('\\u{2640}', 'f'),\n        createModifierButton('\\u{2640}\\u{2642}', 'fm'),\n        createModifierButton('\\u{2642}', 'm'),\n        createModifierButton('\\u{2642}\\u{2640}', 'mf'),\n      ];\n\n      // create tone options\n      const tones = [\n        createModifierButton('\\u{2014}', ''),\n      ];\n      for (let i = 0x1f3fb; i <= 0x1f3ff; ++i) {\n        tones.push(createModifierButton(String.fromCodePoint(i), i));\n      }\n\n      // helper to add/remove\n      const updateStatus = (yes, node, owner) => {\n        yes ? owner.appendChild(node) : node.remove();\n      };\n      return function(info) {\n        const active =\n            modifierHolder.contains(document.activeElement) ? document.activeElement : null;\n        genders.forEach((node) => {\n          const l = node.dataset['value'].length;\n          const yes = (!l && info.gender.neutral)\n              || (l === 1 && info.gender.single)\n              || (l === 2 && info.gender.double);\n          updateStatus(yes, node, genderOption);\n        });\n        tones.forEach((node) => updateStatus(info.tone, node, toneOption));\n\n        // kick the elements: Safari needs this otherwise sometimes they remain hidden (!)\n        modifierHolder.insertBefore(genderOption, genderOption.nextSibling);\n        modifierHolder.insertBefore(toneOption, toneOption.nextSibling);\n\n        // refocus if one was focused\n        active && active.focus();\n      }\n    })();\n  }\n\n  static optionType_(type, value) {\n    const node = document.createElement('div');\n    node.className = 'options ' + type;\n    node.dataset[type] = value;\n    node.dataset['name'] = value;\n    return node;\n  }\n\n  optionForName_(name) {\n    const prev = this.options_.get(name);\n    if (prev) {\n      return prev;\n    }\n    const node = document.createElement('div');\n    node.className = 'options';\n    node.setAttribute('data-option', name);\n\n    if (name[0] === '^') {\n      node.classList.add('special');\n      name = name.substr(1);\n    }\n    node.setAttribute('data-name', name);  // presentation only\n    return node;\n  }\n\n  /**\n   * Creates a `button` with the textContent of the passed emoji. Starts removed from the page,\n   * but will (when valid) be placed in-order inside the specified `option`.\n   *\n   * @param {!HTMLElement} option to place inside\n   * @param {string} emoji\n   * @return {!HTMLButtonElement}\n   */\n  addEmojiTo_(option, emoji) {\n    let button = this.buttons_.get(emoji);\n    if (button) {\n      // if the button was known, check buttonTarget_: either it's the eventual placement, which\n      // we must replace, or it's a known good/bad already\n      const target = this.buttonTarget_.get(button);\n      if (target === null) {\n        return button;  // known invalid\n      } else if (target === undefined) {\n        option.appendChild(button);  // known good\n        return button;\n      }\n    } else {\n      if (this.buttonPool_.length !== 0) {\n        button = this.buttonPool_.pop();\n      } else {\n        button = document.createElement('button');\n      }\n      button.textContent = emoji;\n      this.buttons_.set(emoji, button);\n\n      valid(emoji).then((isValid) => {\n        if (!isValid) {\n          return this.buttonTarget_.set(button, null);\n        }\n\n        const node = this.buttonTarget_.get(button);\n        node.parentNode.replaceChild(button, node);\n        this.buttonTarget_.delete(button);\n      });\n    }\n\n    const node = document.createTextNode('');  // empty placeholder to replace\n    this.buttonTarget_.set(button, node);\n    option.appendChild(node);\n\n    return button;\n  }\n\n  /**\n   * Updated displayed options with real results. These are expected the API format:\n   *    [[name,emoji,emoji,...],[name,emoji,...],...]\n   *\n   * This retains existing options if they are included in the named results.\n   *\n   * @param {!Array<!Array<string>>}\n   */\n  update(results) {\n    const options = new Map();\n    const buttons = new Map();\n    const previousActiveElement =\n        this.holder_.contains(document.activeElement) ? document.activeElement : null;\n\n    results.forEach((result) => {\n      const name = result[0];\n\n      const option = this.optionForName_(name);\n      options.set(name, option);\n      this.options_.delete(name);\n      this.holder_.appendChild(option);  // reinsert in better order\n\n      // TODO(samthor): This is a bit hacky. This saves buttons that are part of these options,\n      // even if they haven't been sent to us again in results.\n      for (let i = 0; i < option.children.length; ++i) {\n        const b = option.children[i];\n        const emoji = b.textContent;\n        if (buttons.has(emoji)) {\n          b.remove();\n          this.buttonPool_.push(b);\n          --i;\n          continue;\n        }\n        buttons.set(emoji, b);\n      }\n\n      for (let i = 1, emoji; emoji = result[i]; ++i) {\n        if (buttons.has(emoji)) {\n          continue;  // already stolen by something above us\n        }\n        // nb. addEmojiTo_ pulls old buttons from this.buttons_\n        buttons.set(emoji, this.addEmojiTo_(option, emoji));\n      }\n    });\n\n    this.options_.forEach((option) => {\n      this.buttonPool_.push(...option.children);\n      option.remove();\n    });\n    this.options_ = options;\n    this.buttons_ = buttons;\n\n    if (previousActiveElement) {\n      if (document.body.contains(previousActiveElement)) {\n        previousActiveElement.focus();\n      } else {\n        typer.focus();  // restore to main input\n      }\n    }\n  }\n}\n\n// key overrides to recognize spacebar causing 'click'\nlet spaceFrame = 0;\nchooser.addEventListener('keyup', (ev) => {\n  if (ev.key !== ' ' || ev.target.localName !== 'button') { return; }\n  spaceFrame = window.setTimeout(() => spaceFrame = 0, 0);\n});\n\n// stores the previous user-driven l/r position\nlet previousChooserLeft = undefined;\nlet duringNavigate = false;\n\n// if a button was focused, reset chooser unless we were going u/d\nchooser.addEventListener('focus', (ev) => {\n  if (!duringNavigate) {\n    previousChooserLeft = document.activeElement.getBoundingClientRect().left;\n  }\n}, true);\n\n/**\n * Navigates through candidates until we find the best not on our current row, and focuses it.\n *\n * @param {!IArrayLike<!Node>} cands\n * @return {boolean} true if we focused something new\n */\nfunction navigateChooserButtonVertical(cands) {\n  const best = {dist: Infinity, button: null};\n\n  const previousRect = document.activeElement.getBoundingClientRect();\n  // did we have a previous explicit l/r position?\n  const left = (previousChooserLeft !== undefined ? previousChooserLeft : previousRect.left);\n\n  let targetTop = undefined;\n  for (let i = 0; i < cands.length; ++i) {\n    const button = cands[i];\n    const candidateRect = button.getBoundingClientRect();\n\n    if (previousRect.top === candidateRect.top) { continue; }\n    if (targetTop === undefined) {\n      targetTop = candidateRect.top;\n    } else if (candidateRect.top !== targetTop) {\n      break;  // no more good candidates\n    }\n\n    const dist = Math.abs(candidateRect.left - left);\n    if (dist < best.dist) {\n      [best.dist, best.button] = [dist, button];\n    }\n  }\n\n  if (!best.button) {\n    return false;\n  }\n  duringNavigate = true;\n  try {\n    best.button.focus();\n  } finally {\n    duringNavigate = false;\n  }\n  return true;\n}\n\n// button click handler\nchooser.addEventListener('click', (ev) => {\n  previousChooserLeft = undefined;  // used a mouse or chose something\n  const isKeyboard = eventlib.isKeyboardClick(ev);\n\n  let label = undefined;\n  const b = ev.target;\n  if (b.localName !== 'button') {\n    // ignore\n  } else if (b.parentNode.dataset['modifier']) {\n    if (ev.shiftKey) {\n      return;  // don't do anything\n    }\n\n    const value = 'value' in b.dataset ? (+b.dataset['value'] || b.dataset['value']) : null;\n    const detail = {type: b.parentNode.dataset['modifier'], code: value};\n    typer.dispatchEvent(new CustomEvent('modifier', {detail}));\n    label = 'modifier';\n  } else if (b.parentNode.dataset['option']) {\n    if (ev.shiftKey) {\n      if (copier.copyText(b.textContent)) {\n        ga('send', 'event', 'options', 'copy');\n      }\n\n      // retain scroll position while refocusing on the suitable target\n      const scrollTop = document.scrollingElement.scrollTop;\n      isKeyboard ? b.focus() : typer.focus();\n      document.scrollingElement.scrollTop = scrollTop;\n      return;\n    }\n\n    // nb. we typically clear the word on choice (as it confuses @nickyringland), but if you hit\n    // space or ctrl-click the button, keep it around.\n    const retainWord = (spaceFrame !== 0 || ev.metaKey || ev.ctrlKey);\n    const word = retainWord ? b.parentNode.dataset['option'] : null;\n\n    const detail = {choice: b.textContent, word};\n    typer.dispatchEvent(new CustomEvent('emoji', {detail}));\n    provider.select(b.parentNode.dataset['option'], detail.choice);\n    label = 'emoji';\n  } else {\n    // unknown\n  }\n  if (!label) { return; }\n\n  ga('send', 'event', 'options', 'click', label);\n\n  if (!isKeyboard) {\n    typer.focus();  // nb. we're actually double-refocusing\n  }\n});\n\n// handle moving down from input\ntyper.addEventListener('keydown', (ev) => {\n  if (ev.key === 'ArrowDown' || ev.key === 'Down') {\n    const typerRect = typer.getBoundingClientRect();\n    previousChooserLeft = typerRect.left + input.cursorPosition(typer);\n\n    if (navigateChooserButtonVertical(chooser.querySelectorAll('button'))) {\n      ga('send', 'event', 'options', 'keyboardnav');\n    }\n  } else if (ev.key === 'ArrowRight' || ev.key === 'Right') {\n    const l = typer.value.length;\n    if (typer.selectionEnd === l && typer.selectionStart === l) {\n      const first = chooser.querySelector('button');\n      first && first.focus();\n    }\n  }\n});\n\n// handle keyboard navigation inside chooser\nchooser.addEventListener('keydown', (ev) => {\n  const arrow = eventlib.arrowFromEvent(ev);\n  if (!arrow) { return; }\n\n  if (!chooser.contains(document.activeElement)) { return; }\n\n  // TODO: memoize value\n  const buttonArray = Array.from(chooser.querySelectorAll('button'));\n  const index = buttonArray.indexOf(document.activeElement);\n  if (index === -1) { return; }\n\n  // handle l/r keys\n  let delta;\n  if (arrow === 'ArrowLeft') {\n    delta = -1;\n  } else if (arrow === 'ArrowRight') {\n    delta = +1;\n  }\n  if (delta) {\n    const target = index + delta;\n    if (target >= 0 && target < buttonArray.length) {\n      buttonArray[target].focus();\n    } else if (target < 0) {\n      typer.focus();\n      typer.dispatchEvent(new CustomEvent('select-end'));\n    }\n    return;  // done\n  }\n\n  // handle u/d keys\n  let cands;\n  if (arrow === 'ArrowUp') {\n    cands = buttonArray.slice(0, index);\n    cands.reverse();\n  } else if (arrow === 'ArrowDown') {\n    cands = buttonArray.slice(index);\n  } else {\n    return;\n  }\n\n  if (!navigateChooserButtonVertical(cands)) {\n    if (arrow === 'ArrowUp') {\n      typer.focus();\n    }\n  }\n  if (arrow === 'ArrowDown') {\n    // don't allow arrow scrolling unless we're within 64 pixels of the screen end\n    const focusRect = document.activeElement.getBoundingClientRect();\n    const max = focusRect.top + focusRect.height;\n    if (window.innerHeight - max > 64) {\n      ev.preventDefault();\n    }\n  }\n});\n\n(function() {\n  const longTime = 2000;\n  const delayTime = 250;\n  const manager = new ButtonManager(chooser);\n\n  let previous = {};\n  let previousQueryAt = performance.now();\n  let previousResults = [];\n\n  // finds the best suggestion and tells the typer\n  function findSuggest(q) {\n    let suggest = null;\n    for (let i = 0; i < previousResults.length; ++i) {\n      const r = previousResults[i];\n      if (suggest === null && r[0].startsWith(q)) {\n        suggest = r;\n      } else if (r[0] === q) {\n        // if we have an _exact_ match, always use it\n        suggest = r;\n        break;\n      }\n    }\n    typer.dispatchEvent(new CustomEvent('suggest', {detail: suggest}));\n  }\n\n  // handler for a prefix search\n  typer.addEventListener('query', (ev) => {\n    const query = ev.detail;\n    const now = performance.now();\n\n    // immediately inform manager of modifier buttons (gender, tone), if it's a full word search\n    const info = modifier.modify(!ev.detail.prefix && ev.detail.focus || '');\n    manager.setModifier(info);\n\n    if (previous.text !== query.text) {\n      // text changed, immediately run suggest code\n      findSuggest(query.text);\n    }\n\n    // TODO(samthor): This delays further requests. Ideally we want to 'subscribe' to a topic\n    // from the provider and just be fed updates as fast as we have them (including if we have\n    // a local cache). This way we avoid awkward delays and filtering oddities.\n    const initialMore = previous.text && query.text && previous.text.length !== 0 &&\n        previous.text.startsWith(query.text.substr(0, previous.text.length)) || false;\n\n    let immediate = false;\n    if (!previous.text || previous.prefix !== query.prefix) {\n      immediate = true;  // type changed, user expects snappiness\n    } else if (now - previousQueryAt > longTime) {\n      immediate = true;  // it's been a while\n    }\n    previous = query;\n    previousQueryAt = now;\n\n    const request = async (timeout=0, more=false) => {\n      if (timeout) {\n        await promises.rAF(timeout);\n        if (previous !== query) { return -1; }\n      }\n      const results = await provider.request(query.text, query.prefix, more);\n      if (previous !== query) { return -1; }\n\n      // find the first matching thing and suggest it as autocomplete\n      previousResults = results;\n      findSuggest(query.text);\n\n      return manager.update(results);\n    };\n\n    const p = request(immediate ? 0 : delayTime, initialMore).then((valid) => {\n      if (valid < 0) { return -2; }  // query changed\n\n      if (!query.text) {\n        // TODO: delay empty data by a decent time\n        return request(1500, true);\n      }\n\n      const timeout = Math.max(1000, 100 * Math.pow(valid, 0.75));\n      return request(timeout, true);\n    }).catch((err) => {\n      console.error('error doing request', err);\n    });\n  });\n}());\n","\n/**\n * @fileoverview Controls the size and `has-value` class of the body itself based on current input.\n */\n\nimport * as promises from './lib/promises.js';\n\nconst value = (ev) => {\n  const text = ev.detail.trim();\n  document.body.classList.toggle('has-value', Boolean(text));\n};\ntyper.addEventListener('value', value);\nvalue({detail: typer.value});\n\n// global return-to-typer\ndocument.body.addEventListener('keydown', (ev) => {\n  switch (ev.key) {\n  case 'Escape':\n    // #1: focus on typer\n    if (document.activeElement !== typer) {\n      typer.focus();\n      break;\n    }\n\n    // #2: clear selection\n    if (typer.selectionStart !== typer.selectionEnd) {\n      if (typer.selectionDirection === 'backward') {\n        typer.selectionStart = typer.selectionEnd;\n      } else {\n        typer.selectionEnd = typer.selectionStart;\n      }\n      break;\n    }\n\n    // #3: move to end of input\n    const l = typer.value.length;\n    typer.setSelectionRange(l, l);\n    break;\n  }\n});\n\nfunction isExtentNode(node) {\n  return node instanceof Element && node.classList.contains('extent');\n}\n\ndocument.addEventListener('selectionchange', (ev) => {\n  const s = window.getSelection();\n  const {anchorNode: a, focusNode: b} = s;\n  if (a !== b && isExtentNode(a) && isExtentNode(b)) {\n    s.removeAllRanges();  // remove immediately to prevent flash\n    typer.focus();\n    typer.dispatchEvent(new CustomEvent('select-all'));\n  }\n}, true);\n\ndocument.addEventListener('focusin', (ev) => {\n  promises.microtask().then(() => {\n    if (document.activeElement === document.body) {\n      typer.focus();\n    }\n  });\n});\n\n// set minHeight to actual viewport height, but allow for keyboard etc\nconst resize = (ev) => {\n  const height = window.innerHeight;\n  document.body.style.minHeight = `${height}px`;\n};\nwindow.addEventListener('resize', resize);\nwindow.addEventListener('load', resize);\nresize();\n\n\nlet deferredPrompt = null;\n\nfunction cleanupPrompt() {\n  document.body.classList.remove('has-install');\n  deferredPrompt = null;\n}\n\nwindow.addEventListener('beforeinstallprompt', (ev) => {\n  ga('send', 'event', 'install', 'available');\n  document.body.classList.add('has-install');\n  deferredPrompt = ev;\n  ev.preventDefault();\n  return false;\n});\n\nwindow.addEventListener('appinstalled', (ev) => {\n  ga('send', 'event', 'install', 'installed');\n  cleanupPrompt();\n});\n\nconst installEl = document.getElementById('install');\ninstallEl.addEventListener('click', (ev) => {\n  if (!deferredPrompt) {\n    return;\n  }\n  deferredPrompt.prompt();\n\n  if (!deferredPrompt.userChoice) {\n    return;  // older Chrome\n  }\n\n  deferredPrompt.userChoice.then((result) => {\n    ga('send', 'event', 'install', result);\n    // TODO: should we listen to appinstalled? I suppose we don't know what the user said.\n  }).catch((err) => {\n    console.warn('beforeinstallprompt prompt', err);\n  }).then(cleanupPrompt);\n});\n","\n/**\n * @fileoverview Rotates through various advertisements in Emojityper.\n */\n\nconst adverts = document.getElementById('adverts');\n\nfunction refresh() {\n  const active = adverts.querySelector('.active');\n  const next = (active && active.nextElementSibling || adverts.firstElementChild);\n  if (!next) {\n    console.warn('no adverts to choose from');\n    return;\n  }\n\n  active && active.classList.remove('active');\n  next.classList.add('active');\n\n  enqueue();\n}\n\nlet timeout;\nfunction enqueue() {\n  window.clearTimeout(timeout);\n  timeout = window.setTimeout(() => {\n    window.requestAnimationFrame(refresh);\n  }, 10 * 1000);\n}\n\nenqueue();\n","\nimport {debounce} from './lib/promises.js';\n\nlet prevOnLine = true;\n\nfunction notifyStatus() {\n  if ('onLine' in navigator && prevOnLine !== navigator.onLine) {\n    ga('send', 'event', 'network', navigator.onLine ? 'online' : 'offline');\n    prevOnLine = navigator.onLine;\n  }\n}\n\nnotifyStatus();\nwindow.addEventListener('online', () => debounce(notifyStatus));\nwindow.addEventListener('offline', () => debounce(notifyStatus));\n","\n/**\n * @fileoverview Polyfills needed for modern browsers, even those supporting ES6 modules.\n */\n\nif (!window.requestIdleCallback) {\n  // TODO: this is a pretty terrible requestIdleCallback\n  window.requestIdleCallback = (callback) => {\n    const start = performance.now();\n    const fn = callback.bind(null, {\n      didTimeout: false,\n      timeRemaining: () => Math.max(0, 50 - (performance.now() - start)),\n    });\n    return window.setTimeout(fn, 1);\n  };\n\n  window.cancelIdleCallback = id => window.clearTimeout(id);\n}\n\nif (!navigator.sendBeacon) {\n  navigator.sendBeacon = function(url, body) {\n    return new Promise((resolve, reject) => {\n      const xhr = new XMLHttpRequest();\n      xhr.open('POST', url, true);\n      xhr.onerror = reject;\n      xhr.onload = resolve;\n      xhr.send(body);\n    });\n  };\n}\n","\n/**\n * @fileoverview Handles the buttons in the top-right of the page (currently just Copy).\n */\n\nimport * as eventlib from './lib/event.js';\nimport * as copier from './lib/copier.js';\n\nconst all = Array.from(buttons.querySelectorAll('button'));\n\nconst handler = (ev) => {\n  const text = ev.detail.trim();\n  const hasValue = Boolean(text);\n  all.forEach((button) => button.disabled = !hasValue);\n};\ntyper.addEventListener('value', handler);\nhandler({detail: typer.value});\n\n// copy handler\n(function(button, input) {\n  let timeout;\n  const defaultText = button.textContent;\n  const spaceRe = /\\s*/;\n\n  const copy = () => {\n    const text = input.dataset['copy'].trim().replace(/\\s+/, ' ');\n    if (!copier.copyText(text)) {\n      console.warn('could not copy', text)\n      return true;\n    }\n    console.info('copied', text);\n\n    // analytics\n    ga('send', 'event', 'text', 'copy');\n\n    // show 'Copied!' message\n    button.textContent = button.dataset['copied'];\n    window.clearTimeout(timeout);\n    timeout = window.setTimeout((ev) => {\n      button.textContent = defaultText;\n      maybeReleaseInputEnter();\n    }, 500);\n  };\n\n  let wasInputEnter = false;\n  input.addEventListener('keydown', (ev) => {\n    if (wasInputEnter) {\n      // do nothing, enter is being _held_\n    } else if (ev.key === 'Enter' && !ev.repeat) {\n      button.click();\n      button.focus();\n      wasInputEnter = true;\n      ev.preventDefault();\n    }\n  });\n  document.body.addEventListener('keyup', (ev) => {\n    if (ev.key === 'Enter') {\n      maybeReleaseInputEnter();\n    }\n  });\n  button.addEventListener('click', (ev) => {\n    ev.preventDefault();\n    if (wasInputEnter || ev.repeat) {\n      return;  // click is generated as the user holds enter\n    }\n    copy();\n    if (eventlib.isKeyboardClick(ev)) {\n      // if the user tabbed here, keep focus\n      button.focus();\n    }\n  });\n\n  function maybeReleaseInputEnter() {\n    if (wasInputEnter) {\n      if (document.activeElement === button) {\n        input.focus();  // maybe focus moved\n      }\n      wasInputEnter = false;\n    }\n  }\n\n}(copy, typer));\n\n","\n/**\n * @fileoverview Async worker.\n */\n\nimport * as promises from './promises.js';\n\nconst allowedWorkTime = 4;\nconst maximumTaskFrame = 100;\n\nexport default class Worker {\n  constructor(fn) {\n    this.fn_ = fn;\n    this.queue_ = [];\n    this.waiting_ = null;\n\n    this.runner_().catch((err) => {\n      console.info('worker runner failed', err);\n      throw err;\n    });\n  }\n\n  async runner_() {\n    await new Promise((resolve) => this.waiting_ = resolve);\n    this.waiting_ = null;\n    await promises.idle();\n\n    for (;;) {\n      if (this.chunk_()) {\n        return this.runner_();\n      }\n      await promises.rAF();\n    }\n  }\n\n  /**\n   * Completes a chunk of work.\n   *\n   * @return {boolean} Whether work is done.\n   */\n  chunk_() {\n    const start = window.performance.now();\n\n    let done = 0;\n    while (this.queue_.length) {\n      const next = this.queue_.shift();\n      next.resolve(this.fn_(next.arg));\n      ++done;\n\n      if (done == maximumTaskFrame || window.performance.now() - start > allowedWorkTime) {\n        break;\n      }\n    }\n\n    return !this.queue_.length;\n  }\n\n  task(arg) {\n    return new Promise((resolve) => {\n      this.queue_.push({resolve, arg});\n      this.waiting_ && this.waiting_();\n    });\n  }\n}\n","\nimport * as provider from './lib/provider.js';\nimport * as promises from './lib/promises.js';\n\n// advanced handler\n(function(input, advanced) {\n  const form = advanced.querySelector('form');\n  const namer = form.querySelector('input');\n  const button = form.querySelector('button');\n\n  let value = '';\n  let pending = null;\n\n  input.addEventListener('query', (ev) => {\n    const query = ev.detail;\n    const selection = (query.text === null && query.focus !== undefined && query.selection);\n    value = query.focus;\n    if (!selection) {\n      if (!pending) {\n        namer.value = '';  // clear on done if not pending\n        advanced.hidden = true;\n      }\n      return false;\n    }\n    // TODO: round trip to confirm validity of emoji?\n    advanced.hidden = false;\n  });\n\n  const handler = ev => {\n    button.disabled = !namer.value;\n  };\n  'input change'.split(/\\s+/).forEach(type => namer.addEventListener(type, handler));\n\n  form.addEventListener('submit', (ev) => {\n    ev.preventDefault();\n    if (pending) {\n      return false;  // can't submit while running\n    }\n\n    form.classList.add('pending');\n    namer.disabled = true;\n    button.disabled = true;\n\n    const cleanup = _ => {\n      form.classList.remove('pending');\n      namer.disabled = false;\n      namer.value = '';\n      namer.dispatchEvent(new CustomEvent('change'));\n\n      pending = null;\n      if (!value) {\n        advanced.hidden = true;\n      }\n    };\n\n    pending = provider.submit(namer.value, value).then((response) => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      button.classList.add('success');\n      return false;\n    }).catch(err => {\n      button.classList.add('failure');\n      console.warn('failed to submit emoji', err);\n      return true;\n    }).then(cleanup);\n\n    pending.then(() => promises.delay(2000)).then(() => {\n      button.className = '';\n    });\n  });\n}(typer, advanced));\n","\nif (navigator.serviceWorker) {\n  navigator.serviceWorker.register('./sw.js').catch((err) => {\n    console.warn('failed to register SW', err);\n  });\n\n  const hadInitialController = Boolean(navigator.serviceWorker.controller);\n  navigator.serviceWorker.addEventListener('controllerchange', () => {\n    if (hadInitialController) {\n      // only reload if we had a SW on load\n      console.debug('got SW controllerchange, reload');\n      window.location.reload();\n    } else {\n      // this is the very first SW, so reloading doesn't help us\n    }\n  });\n}\n"]}